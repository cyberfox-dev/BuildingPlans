<app-nav-menu></app-nav-menu>
<link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700,800&display=swap" rel="stylesheet">
<link _ngcontent-ng-cli-universal-c545="" href="https://fonts.googleapis.com/css?family=Roboto:300italic,400italic,400,100,300,600,700" rel="stylesheet" type="text/css">

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<!--<h1>Navbar</h1>-->
<!--<app-config-acting-department [isInternal]="CurrentUserProfile[0].isInternal"></app-config-acting-department>-->



<div class="container-fluid main">

  <h1 class="animationSlideUp">Hi, {{CurrentUser.fullName}}</h1>
  <h2 class="animationSlideUp">Welcome to your Dashboard</h2>
  <!--  <div style="background: red; text-align: center; font-size: xx-large; color: white; padding: 10px; line-height: 0.8;" *ngIf="ServerType === 'QA'">
      Please note, you've accessed the test server, nothing captured to this server will be processed. Please go to wayleave.capetown.gov.za to access the live site.
    </div>-->
  <!--  <button class="btn" (click)="goToNewWayleave()"><a><i class="fa fa-plus"></i> Create New Wayleave</a></button>-->
  <div class="cont3 ">
    <button mat-raised-button color="createWayleave" class="animationSlideDown" (click)="goToNewWayleave(false,false)"><i class="fa fa-plus"></i> Create New Wayleave</button>
    <button mat-raised-button color="createWayleave" class="animationSlideDown" (click)="goToNewWayleave(false,true)"><i class="fa fa-plus"></i> Request for Services Information</button>
  </div>






  <!--Tabs-->

  <div class="main-container animationFadeIn">

    <div class="cards" *ngIf="cardFilters" >
      <div class="card card-5" (click)="filterByUnpaid()">
        <h4>Unpaid</h4>
        <h1 class="num">{{unpaidcount}}</h1>
        <p class="card__apply">
          <a class="card__link">View</a>
        </p>
      </div>
      <div class="card card-2" (click)="filterByDistribution()">
        <h4>Distribution</h4>
        <h1 class="num">{{distributioncount}}</h1>
        <p class="card__apply">
          <a class="card__link">View</a>
        </p>
      </div>

      <div class="card card-1" (click)="filterByApproved()">
        <h4>Approved</h4>
        <h1 class="num">{{approveCount}}</h1>
        <p class="card__apply">
          <a class="card__link">View</a>
        </p>
      </div>

      <div class="card card-4" (click)="filterByRejected()">
        <h5>Rejected</h5>
        <h1 class="numReject">{{rejectCount}}</h1>
        <p class="card__apply">
          <a class="card__link">View</a>
        </p>
      </div>
      <div class="card card-3" (click)="filterByWIP()">
        <h4>WIP</h4>
        <h1 class="num">{{EMBcount}}</h1>
        <p class="card__apply">
          <a class="card__link">View</a>
        </p>
      </div>

    </div>
  </div>
  <!--END OF TABS-->

  <div class="table container-fluid animationFadeIn">
    <!--  <table class="table table-hover table-xl border_bottom">
    <thead>
      <tr class="tableheader">
        <th scope="col" class="border-top-0">Status</th>
        <th scope="col" class="border-top-0">Project#</th>
        <th scope="col" class="border-top-0">Item Location</th>
        <th scope="col" class="border-top-0">Item Name</th>
        <th scope="col" class="border-top-0">Application Type</th>
        <th scope="col" class="border-top-0">Current Stage</th>
        <th scope="col" class="border-top-0">Date Created</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="text-truncate row_padding">
          <i class="la la-dot-circle-o  font-medium-1 mr-1"></i>
          Test
        </td>
        <td class="text-truncate row_padding">
          <a href="javascript:void(0);" (click)="viewProject()">TEST</a>
        </td>

        <td class="text-truncate row_padding">
          <span>TEST</span>
        </td>

        <td class="text-truncate row_padding">
          <span>TEST</span>
        </td>
        <td class="text-truncate row_padding">
          <span>
            TEST
          </span>
        </td>
        <td class="text-truncate row_padding">
          <span>TEST</span>
        </td>
        <td class="text-truncate row_padding">TEST</td>
      </tr>
    </tbody>-->
    <!--ProjectNumber-->
    <!--</table>-->
    <!--    <mat-form-field>
      <mat-label>Filter</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>
    </mat-form-field>-->
    <div class="">
      <div class="container02">
        <button mat-button [matMenuTriggerFor]="menu" matTooltip="Filter Applications" color="filter" aria-label="Example icon-button with a menu" (click)="onFilterButtonClick()" *ngIf="FilterBtn">
          <i class="fa fa-filter" aria-hidden="true"></i>
        </button>
        <mat-menu #menu="matMenu" yPosition="below">
          <button mat-menu-item (click)="onFilterApplicationForMyReviews()">
            <span>My Reviews</span>
          </button>
          <button mat-menu-item (click)="onFilterApplicationsFprMyApplications()">
            <span>My Applications</span>
          </button>
          <button mat-menu-item (click)="onFilterAPplicationsForRecentApplications()">
            <span>All Projects</span>
          </button>
        </mat-menu>
        <mat-form-field appearance="outline">
          <mat-label>Search</mat-label>
          <div class="cont6">

            <input matInput placeholder="Search By Project Number Or Application Number" (keyup)="applyFilter($event)" #input>
            <i class="fa fa-search" aria-hidden="true"></i>
          </div>

        </mat-form-field>


      </div>
      <div class="filterValue">
        <p *ngIf="notNyProjects">You Are Currently Viewing {{FiterValue}}</p>
        <p *ngIf="MyProjects">You Are Currently Viewing Your Applications</p>
      </div>
      <div class="container003">
        <img src="assets/Loading.png" *ngIf="isTableLoading" class="logo2">
      </div>
      <table mat-table [dataSource]="dataSource" *ngIf="isTableLoading == false" class="mat-elevation-z8 animationFadeIn">


        <ng-container matColumnDef="Stage">
          <th mat-header-cell *matHeaderCellDef>Stage</th>
          <td mat-cell *matCellDef="let element"> {{element.CurrentStage}} </td>
        </ng-container>

        <ng-container matColumnDef="ProjectNumber">
          <th mat-header-cell *matHeaderCellDef>Project Number</th>
          <td mat-cell *matCellDef="let element">
            <span class="processFlow"
                  (click)="element?.ProjectNumber?.startsWith('WL') ? getLinkedZones(element.ApplicationID, processFlow) : null;"
                  [class.disabled]="!element?.ProjectNumber?.startsWith('WL')">
              {{element?.ProjectNumber}}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="AplicationAge">
          <th mat-header-cell *matHeaderCellDef>Application Age</th>
          <td mat-cell *matCellDef="let element"> {{element.TestApplicationAge}} Days</td>
        </ng-container>

        <ng-container matColumnDef="Status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let element"> {{element.ApplicationStatus}} </td>
        </ng-container>

        <ng-container matColumnDef="StageAge">
          <th mat-header-cell *matHeaderCellDef>Stage Age</th>
          <td mat-cell *matCellDef="let element"> {{element.TestApplicationStageAge}} Days</td>
        </ng-container>

        <ng-container matColumnDef="FullName">
          <th mat-header-cell *matHeaderCellDef>Full Name</th>
          <td mat-cell *matCellDef="let element"> {{element.FullName}} </td>
        </ng-container>

        <ng-container matColumnDef="TypeOfApplication">
          <th mat-header-cell *matHeaderCellDef>Type</th>
          <td mat-cell *matCellDef="let element"> {{element.TypeOfApplication}} </td>
        </ng-container>

        <ng-container matColumnDef="DateCreated">
          <th mat-header-cell *matHeaderCellDef>Date Created</th>
          <td mat-cell *matCellDef="let element"> {{element.DateCreated}} </td>
        </ng-container>


        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let applications of ApplicationsList ; let i = index;let element">
            <div class="buttons">
              <button mat-raised-button color="blue" matTooltip="View Application" (click)="CheckIfCanReapply(element,i)"><i class="fa fa-eye"></i></button>



              <button mat-raised-button color="warn" matTooltip="Escalate" *ngIf="applications.TestApplicationAge >= this.viewEscalateDate"><i class="fa fa-arrow-circle-up"></i></button>
            </div>
            <div class="menu">
              <button mat-button color="action" [matMenuTriggerFor]="actions"> <i class="fa fa-ellipsis-v" aria-hidden="true"></i></button>
              <mat-menu #actions="matMenu">
                <!--<button mat-menu-item (click)="CheckIfCanReapply(i)"> View Project</button>-->
                <button mat-menu-item>Escalate Project</button>
              </mat-menu>
            </div>
          </td>
          <td mat-cell *matCellDef="let element">  </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        <!--     <tr *ngFor="let item of items | slice: (page-1) * pageSize : page * pageSize"></tr>-->
        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell" colspan="4">No data matching the filter "{{input.value}}"</td>
        </tr>

      </table>
      <!-- <mat-paginator [pageSize]="10" [length]="dataSource?.length" [pageSizeOptions]="[5, 10, 25, 50]"></mat-paginator>-->
      <!--  <ngb-pagination [collectionSize]="70" [(page)]="page" aria-label="Default pagination"></ngb-pagination>-->


    </div>

  </div>

  <ng-template #internalOpt let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">As an internal applicant are you applying for :</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form>
        <div class="container-fluid">


          <div class="cont2">
            <button mat-raised-button color="client" [class.matactive]="option ==='internal'" (click)="cardchange('internal')"><i class="fa fa-user" aria-hidden="true"></i> Yourself</button>
            <button mat-raised-button color="client" [class.matactive]="option ==='client'" (click)="cardchange('client')"> <i class="fa fa-user-plus" aria-hidden="true"></i> Client</button>

          </div>
        </div>

      </form>
    </div>
    <div class="modal-footer">

      <button type="button" class="btn btn-outline-success" (click)="sendOption();modal.dismiss('Cross click')">Continue</button>
    </div>

  </ng-template>


  <ng-template #clientOption let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Who Are You Applying For?</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form>
        <div class="container-fluid">




          <div class="cont2">
            <button mat-raised-button color="client" [class.cardactive]="option ==='client'" (click)="cardchange('client');modal.dismiss('Cross click'); openNewClient(newClient)"> <i class="fa fa-user-plus" aria-hidden="true"></i> New Client</button>
            <!--<button mat-raised-button color="internal" (click)="openUser(user);modal.dismiss('Cross click')" [class.cardactive]="option ==='internal'"><i class="fa fa-user" aria-hidden="true"></i> Existing Client</button>-->
            <button mat-raised-button color="internal" (click)="openChoice(choiceEC);modal.dismiss('Cross click')" [class.cardactive]="option ==='internal'"><i class="fa fa-user" aria-hidden="true"></i> Existing Client</button>
          </div>
        </div>

      </form>
    </div>
    <div class="modal-footer">
      <!--  <button mat-raised-button color="save" (click)="sendOption();modal.dismiss('Cross click')"> Continue</button>-->

    </div>

  </ng-template>

  <div class="text-center">
    <ng-template #choiceEC let-modal>
      <div class="modal-header">
        <h6 class="modal-title" id="modal-basic-title">Are you applying for an internal user or an external client?</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
      </div>
      <div class="modal-body">
        <div class="toggle-container">
          <div [class.bold-text]="!isInternalUser" class="text-left">EXTERNAL</div>
          <mat-slide-toggle [(ngModel)]="isInternalUser" class="toggle"></mat-slide-toggle>
          <div [class.bold-text]="isInternalUser" class="text-right">INTERNAL</div>
        </div>
      </div>
      <div class="modal-footer">
        <button mat-raised-button class="btn btn-outline-success" (click)="handleChoice(internalUser, user);modal.dismiss('Cross click')"> Continue</button>
      </div>
    </ng-template>
  </div>

  <!--choose existing-->
  <ng-template #user let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Choose the external client</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="clearFilter(); modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

      <div class="container-fluid">
        <mat-form-field>
          <mat-label>Filter</mat-label>
          <!--<input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>-->
          <input matInput (keyup)="applyExistingClientFilter($event)" placeholder="Ex. ium" #input>
        </mat-form-field>

        <table mat-table [dataSource]="dataSourceLinkUsers" class="mat-elevation-z8">
          <!--*ngIf="showZoneUserTable"-->

          <ng-container matColumnDef="idNumber">
            <th mat-header-cell *matHeaderCellDef> ID Number </th>
            <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
          </ng-container>

          <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef> User Name </th>
            <td mat-cell *matCellDef="let element"> {{element.fullName}} </td>
          </ng-container>


          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Select</th>
            <td mat-cell *matCellDef="let i = index">

              <mat-radio-button class="example-margin" (click)="getUserID(i)"></mat-radio-button>
            </td>

          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsLinkUsers"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsLinkUsers;"></tr>
        </table>

      </div>
      <div class="container-fluid">

      </div>
    </div>

    <div class="modal-footer">
      <button type="submit" class="btn btn-outline-success" (click)="openXl(Prof);closeModalFromModal();modal.close('Save click')">Save</button>
    </div>
  </ng-template>

  <ng-template #internalUser let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Choose the internal user</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="clearFilter(); modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

      <div class="container-fluid">
        <mat-form-field>
          <mat-label>Filter</mat-label>
          <!--<input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>-->
          <input matInput (keyup)="applyInternalClientFilter($event)" placeholder="Ex. ium" #input>
        </mat-form-field>

        <table mat-table [dataSource]="dataSourceLinkAllUsers" class="mat-elevation-z8">
          <!--*ngIf="showZoneUserTable"-->

          <!--<ng-container matColumnDef="idNumber">
            <th mat-header-cell *matHeaderCellDef> ID Number </th>
            <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
          </ng-container>-->

          <ng-container matColumnDef="internalDepartment">
            <th mat-header-cell *matHeaderCellDef> Department </th>
            <td mat-cell *matCellDef="let element"> {{element.internalDepartment}} </td>
          </ng-container>

          <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef> User Name </th>
            <td mat-cell *matCellDef="let element"> {{element.fullName}} </td>
          </ng-container>


          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Select</th>
            <td mat-cell *matCellDef="let i = index">

              <mat-radio-button class="example-margin" (click)="getInternalUserID(i)"></mat-radio-button>
            </td>

          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsLinkAllUsers"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsLinkAllUsers;"></tr>
        </table>

      </div>
      <div class="container-fluid">

      </div>
    </div>

    <div class="modal-footer">
      <button type="submit" class="btn btn-outline-success" (click)="openXl(Prof);closeModalFromModal();modal.close('Save click')">Save</button>
    </div>
  </ng-template>
  <!--end-->
  <!--Before just adding a contractor and engineer, need to be able to check which professionals are already in the system-->
  <!--Should the external mans be able to select one?-->
  <!--This is for adding contractor & engineer-->
  <ng-template #Prof let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Add New Professional for {{selectedUserName}} </h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">
        <mat-tab-group dynamicHeight>
          <mat-tab label="Creating a new engineer">
            <!--<form>-->

            <div class="row">
              <!--<div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="BpNoApplicant" [(ngModel)]="bpNoApplicant" placeholder="Enter BP Number" name="bpNoApplicant">
                  <label for="bpNoApplicant">BP Number</label>
                </div>
              </div>-->
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="professionalRegNo" [(ngModel)]="professionalRegNo" placeholder="Professional Reg No" name="professionalRegNo">
                  <label for="professionalRegNo">Professional Reg No.</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="engineerIDNo" [(ngModel)]="engineerIDNo" placeholder="Engineer ID Number" name="engineerIDNo">
                  <label for="engineerIDNo">ID Number</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="Name" [(ngModel)]="name" placeholder="Enter First Name" name="name">
                  <label for="name">Name</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="Surname" [(ngModel)]="surname" placeholder="Enter Surname" name="surname">
                  <label for="surname">Surname</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="tel" class="form-control" id="ApplicantTel" [(ngModel)]="applicantTellNo" placeholder="Enter Tell No." name="applicantTellNo">
                  <label for="applicantTellNo">Cell No.</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="email" class="form-control" id="ApplicantEmail" [(ngModel)]="applicantEmail" placeholder="Enter Email" name="applicantEmail">
                  <label for="applicantEmail">Email</label>
                </div>
              </div>
            </div>
            <!--          <button type="button" class="btn btn-outline-success" (click)="onAddEngineer()">Save</button>
            -->
            <!--<button mat-raised-button color="green" (click)="onAddEngineer()">Save</button>-->
            <div class="button-container">
              <button mat-raised-button color="green" (click)="onAddTheirEngineer(showAddedProf);modal.close('Save click');">Add Engineer</button>
              <button mat-raised-button color="green" (click)="openViewTheirProf(showAddedProf);modal.close('Save click');">Working List</button>
              <button mat-raised-button color="green" (click)="openOlderProf(oldProf);modal.close('Save click');">View Existing</button>
            </div>

          </mat-tab>
          <mat-tab label="Creating a New Contractor">
            <div class="mb-3">

              <!--<div class="row">-->
              <!--<div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="bpNoContractor" [(ngModel)]="bpNoContractor" placeholder="Enter BP Number" name="bpNoContractor">
                  <label for="bpNoContractor">BP Number</label>
                </div>
              </div>-->
              <!--          <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="ProfessionalRegNo" [(ngModel)]="ProfessionalRegNo" placeholder="Enter Professional Reg No" name="professionalRegNo">
                  <label for="professionalRegNo">CIDB Number</label>
                </div>
              </div>-->
              <!--</div>-->
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="contractorIDNo" [(ngModel)]="contractorIDNo" placeholder="Enter ID Number" name="contractorIDNo">
                    <label for="contractorIDNo">Company Name</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="ProfessionalRegNo" [(ngModel)]="ProfessionalRegNo" placeholder="Enter Professional Reg No" name="professionalRegNo">
                    <label for="professionalRegNo">CIDB Number</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="CIBDrating" [(ngModel)]="CIBRating" placeholder="Enter Grading" name="CIBRating">
                    <label for="CIBDrating">CIDB Grading</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="Name" [(ngModel)]="Name" placeholder="Enter First Name" name="name">
                    <label for="name">Name</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="Surname" [(ngModel)]="Surname" placeholder="Enter Surname" name="surname">
                    <label for="surname">Surname</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="tel" class="form-control" id="ContractorTell" [(ngModel)]="ContractorTell" placeholder="Enter Tell No." name="contractorTell">
                    <label for="contractorTell">Cell No.</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="email" class="form-control" id="ContractorEmail" [(ngModel)]="ContractorEmail" placeholder="Enter Email" name="contractorEmail">
                    <label for="contractorEmail">Email</label>
                  </div>
                </div>
              </div>

              <!--            <button type="button" class="btn btn-outline-success" (click)="onAddContractor()">Save</button>
              -->
              <!--<button mat-raised-button color="green" (click)="onAddContractor()">Save</button>-->
              <!--<button mat-raised-button color="green" (click)="onAddTheirContractor(showAddedProf);modal.close('Save click');">Save</button>-->
              <div class="button-container">
                <button mat-raised-button color="green" (click)="onAddTheirContractor2(showAddedProf);modal.close('Save click');">Add Contractor</button>
                <button mat-raised-button color="green" (click)="openViewTheirProf(showAddedProf);modal.close('Save click');">Working List</button>
                <button mat-raised-button color="green" (click)="openOlderProf(oldProf);modal.close('Save click');">View Existing</button>
              </div>
            </div>
          </mat-tab>
          <!--</form>-->
        </mat-tab-group>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="saveAllEngineers();saveAllContractors();populateClientInfo();modal.close('Save click');">Next</button>
    </div>
  </ng-template>




  <!--end contractor & engineer-->





  <ng-template #newClient let-modal>
    <div class="modal-header">
      <h6 class="modal-title">Add New Client Information</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

      <mat-horizontal-stepper #stepper>


        <mat-step label="User Information">

          <form>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="clientName" name="clientName" placeholder="Enter First Name">
                  <label for="clientName">Name</label>
                </div>
              </div>

              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="clientSurname" name="clientSurname" placeholder="Enter Surname">
                  <label for="clientSurname">Surname</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="clientEmail" name="clientEmail" placeholder="Enter Email">
                  <label for="clientEmail">Email</label>
                </div>
              </div>

              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="clientCellNo" name="clientCellNo" placeholder="Enter Cell Number">
                  <label for="clientCellNo">Cell Number</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <!--Welp, the ID number wasn't there...-->
                  <input type="text" class="form-control" [(ngModel)]="clientIDNumber" name="clientIDNumber" placeholder="Enter ID No">
                  <label for="clientIDNumber">ID Number</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="clientRefNo" name="clientRefNo" placeholder="Enter Ref No">
                  <label for="clientRefNo">Reference Number</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="email" class="form-control" [(ngModel)]="clientBpNumber" name="clientBpNumber" placeholder="Bp Number">
                  <label for="clientBpNumber">Bp Number</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="clientCompanyName" name="clientCompanyName" placeholder="Enter Company Name">
                  <label for="address">Company Name</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="clientCompanyRegNo" name="clientCompanyRegNo" placeholder="Enter Company Reg No">
                  <label for="address">Company Reg No.</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="email" class="form-control" [(ngModel)]="clientCompanyType" name="clientCompanyType" placeholder="Select Company Type">
                  <label for="applicantEmail">Company Type</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="form-floating mb-3 mt-3">
                <input type="email" class="form-control" [(ngModel)]="clientPhysicalAddress" name="clientPhysicalAddress" placeholder="Select Address">
                <label for="applicantEmail">Address</label>
              </div>



            </div>

          </form>

          <br>
          <!--<button mat-raised-button color="green" (click)="onAddNewClient()">Save</button>-->
          <!--<button mat-raised-button color="green" (click)="createNewClient()">Save</button>-->
          <button mat-raised-button color="green" (click)="validateClientInfo(stepper)">Save</button>
          <div class="cont889">

            <!--<button mat-raised-button color="primary" *ngIf="nextBtn" (click)="checkIfError(stepper)">Next</button>-->
            <!--I now validate when I create the client-->
            <button mat-raised-button color="primary">Next</button>


          </div>

        </mat-step>
        <mat-step label="Engineer Information">


          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" id="BpNoApplicant" [(ngModel)]="bpNoApplicant" placeholder="Enter BP Number" name="bpNoApplicant">
                <label for="bpNoApplicant">BP Number</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" id="professionalRegNo" [(ngModel)]="professionalRegNo" placeholder="Professional Reg No" name="professionalRegNo">
                <label for="professionalRegNo">Professional Reg No.</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" id="engineerIDNo" [(ngModel)]="engineerIDNo" placeholder="Engineer ID Number" name="engineerIDNo">
                <label for="engineerIDNo">ID Number</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" id="Name" [(ngModel)]="name" placeholder="Enter First Name" name="name">
                <label for="name">Name</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" id="Surname" [(ngModel)]="surname" placeholder="Enter Surname" name="surname">
                <label for="surname">Surname</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="tel" class="form-control" id="ApplicantTel" [(ngModel)]="applicantTellNo" placeholder="Enter Tell No." name="applicantTellNo">
                <label for="applicantTellNo">Cell No.</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="email" class="form-control" id="ApplicantEmail" [(ngModel)]="applicantEmail" placeholder="Enter Email" name="applicantEmail">
                <label for="applicantEmail">Email</label>
              </div>
            </div>
          </div>
          <div *ngIf="dataSourceNewTempEngineers.length === 0">
            <hr />
            No engineers have been added for {{this.clientFullName}}.
          </div>
          <div *ngIf="dataSourceNewTempEngineers.length > 0">
            <hr />
            <table>
              <thead>
                <tr>
                  <th>BP Number</th>
                  <th>Professional Reg No.</th>
                  <th>ID Number</th>
                  <th>Name</th>
                  <th>Surname</th>
                  <th>Cell No.</th>
                  <th>Email</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let engineer of NewTempEngList; let i = index"
                    [class.selected-row]="i === selectedNewIndex">
                  <td>{{ engineer.bpNumber }}</td>
                  <td>{{ engineer.professionalRegNo }}</td>
                  <td>{{ engineer.idNumber }}</td>
                  <td>{{ engineer.name }}</td>
                  <td>{{ engineer.surname }}</td>
                  <td>{{ engineer.phoneNumber }}</td>
                  <td>{{ engineer.email }}</td>
                  <td>
                    <button mat-raised-button color="orange" matTooltip="Edit Engineer" (click)=" editNewTemporaryEngineer(i) "><i class="fa fa-pencil"></i></button>
                    <button mat-raised-button color="warni" matTooltip="Delete Engineer" (click)="deleteNewTemporaryEngineerWithConfirmation(i);"><i class="fa fa-trash"></i></button>
                  </td>
                </tr>
              </tbody>
            </table>

          </div>
          <!--          <button type="button" class="btn btn-outline-success" (click)="onAddEngineer()">Save</button>
          -->
          <!--<button mat-raised-button color="green" (click)="onAddEngineer()">Save</button>-->
          <div class="button-container">
            <button mat-raised-button color="green" *ngIf="!editing" (click)="onTempAddNewEngineer()">Add Engineer</button>
            <button mat-raised-button color="green" *ngIf="editing" (click)=" saveEditNewTempEngineer()">Edit Engineer</button>
            <button mat-raised-button color="green" *ngIf="editing" (click)="undoEdit()">Cancel</button>
          </div>
          <div class="cont889">

            <button mat-raised-button color="primary" matStepperNext>Next</button>


          </div>
        </mat-step>
        <mat-step label="Contractor Information">
          <div class="mb-3">

            <!--<div class="row">-->
            <!--<div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" id="bpNoContractor" [(ngModel)]="bpNoContractor" placeholder="Enter BP Number" name="bpNoContractor">
                <label for="bpNoContractor">BP Number</label>
              </div>
            </div>-->
            <!--          <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" id="ProfessionalRegNo" [(ngModel)]="ProfessionalRegNo" placeholder="Enter Professional Reg No" name="professionalRegNo">
                <label for="professionalRegNo">CIDB Number</label>
              </div>
            </div>-->
            <!--</div>-->
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="contractorIDNo" [(ngModel)]="contractorIDNo" placeholder="Enter ID Number" name="contractorIDNo">
                  <label for="contractorIDNo">Company Name</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="ProfessionalRegNo" [(ngModel)]="ProfessionalRegNo" placeholder="Enter Professional Reg No" name="professionalRegNo">
                  <label for="professionalRegNo">CIDB Number</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="CIBDrating" [(ngModel)]="CIBRating" placeholder="Enter Grading" name="CIBRating">
                  <label for="CIBDrating">CIDB Grading</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="Name" [(ngModel)]="Name" placeholder="Enter First Name" name="name">
                  <label for="name">Name</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="Surname" [(ngModel)]="Surname" placeholder="Enter Surname" name="surname">
                  <label for="surname">Surname</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="tel" class="form-control" id="ContractorTell" [(ngModel)]="ContractorTell" placeholder="Enter Tell No." name="contractorTell">
                  <label for="contractorTell">Cell No.</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="email" class="form-control" id="ContractorEmail" [(ngModel)]="ContractorEmail" placeholder="Enter Email" name="contractorEmail">
                  <label for="contractorEmail">Email</label>
                </div>
              </div>
            </div>
            <div *ngIf="dataSourceNewTempContractors.length === 0">
              <hr />
              No contractors have been added for {{this.clientFullName}}.
            </div>
            <div *ngIf="dataSourceNewTempContractors.length > 0">
              <hr />
              <table>
                <thead>
                  <tr>
                    <th>CIDB Rating</th>
                    <th>CIDB Number</th>
                    <!--<th>ID Number</th>-->
                    <th>Company Name</th>
                    <th>Name</th>
                    <th>Surname</th>
                    <th>Cell No.</th>
                    <th>Email</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let contractor of NewTempConList; let i = index"
                      [class.selected-row]="i === selectedNewIndex">
                    <td>{{ contractor.CIBRating }}</td>
                    <td>{{ contractor.professionalRegNo }}</td>
                    <td>{{ contractor.idNumber }}</td>
                    <td>{{ contractor.name }}</td>
                    <td>{{ contractor.surname }}</td>
                    <td>{{ contractor.phoneNumber }}</td>
                    <td>{{ contractor.email }}</td>
                    <td>
                      <button mat-raised-button color="orange" matTooltip="Edit Engineer" (click)="editNewTemporaryContractor(i) "><i class="fa fa-pencil"></i></button>
                      <button mat-raised-button color="warni" matTooltip="Delete Engineer" (click)="deleteNewTemporaryContractorWithConfirmation(i);"><i class="fa fa-trash"></i></button>
                    </td>
                  </tr>
                </tbody>
              </table>

            </div>

            <!--            <button type="button" class="btn btn-outline-success" (click)="onAddContractor()">Save</button>
            -->
            <!--<button mat-raised-button color="green" (click)="onAddContractor()">Save</button>-->
            <div class="button-container">
              <button mat-raised-button color="green" *ngIf="!editing" (click)="onTempAddNewContractor()">Add Contractor</button>
              <button mat-raised-button color="green" *ngIf="editing" (click)="saveEditNewTempContractor()">Edit Contractor</button>
              <button mat-raised-button color="green" *ngIf="editing" (click)="undoEdit()">Cancel</button>
            </div>
          </div>
          <div class="cont8789">
            <button mat-raised-button color="primary" matStepperPrevious>Back</button>
            <button mat-raised-button color="primary" (click)="populateClientInfo();modal.dismiss('Cross click');saveAllNewEngineers();saveAllNewContractors()">Finish</button>

          </div>
        </mat-step>
        <!--</form>-->
      </mat-horizontal-stepper>
    </div>


  </ng-template>


  <ng-template #processFlow let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Process Flow</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">

        <table mat-table [dataSource]="dataSourceViewLinkedZones" class="mat-elevation-z8">


          <ng-container matColumnDef="subDepartmentName">
            <th mat-header-cell *matHeaderCellDef>Sub Departments</th>
            <td mat-cell *matCellDef="let element"> {{element.subDepartmentName}} </td>
          </ng-container>

          <ng-container matColumnDef="zoneName">
            <th mat-header-cell *matHeaderCellDef>Zones</th>
            <td mat-cell *matCellDef="let element"> {{element.zoneName}} </td>
          </ng-container>






          <tr mat-header-row *matHeaderRowDef="displayedColumnsViewLinkedZones"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsViewLinkedZones;"></tr>
        </table>


      </div>
    </div>
    <div class="modal-footer">

      <button type="button" class="btn btn-light" (click)="modal.dismiss('Cross click')">Close</button>
    </div>

  </ng-template>


  <ng-template #loadModal let-modal>

    <p>Loading</p>
  </ng-template>

  <ng-template #showAddedProf let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">View Professionals Added for {{selectedUserName}}</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">
        <mat-tab-group dynamicHeight>
          <mat-tab label="Engineers">
            <div *ngIf="dataSourceTempEngineers.length === 0">
              No new engineer added for this user.
            </div>
            <div *ngIf="dataSourceTempEngineers.length > 0">
              <table mat-table [dataSource]="dataSourceTempEngineers" class="mat-elevation-z8">
                <ng-container matColumnDef="bpNumber">
                  <th mat-header-cell *matHeaderCellDef> BP Number </th>
                  <td mat-cell *matCellDef="let element">{{element.bpNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="profRegNum">
                  <th mat-header-cell *matHeaderCellDef> Professional Reg No. </th>
                  <td mat-cell *matCellDef="let element">{{element.profRegNum}} </td>
                </ng-container>
                <ng-container matColumnDef="idNum">
                  <th mat-header-cell *matHeaderCellDef> ID Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.idNum}}</td>
                </ng-container>
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef> Name </th>
                  <td mat-cell *matCellDef="let element">{{element.name}} </td>
                </ng-container>
                <ng-container matColumnDef="surname">
                  <th mat-header-cell *matHeaderCellDef> Surname </th>
                  <td mat-cell *matCellDef="let element">{{element.surname}} </td>
                </ng-container>
                <ng-container matColumnDef="cellular">
                  <th mat-header-cell *matHeaderCellDef> Cell No. </th>
                  <td mat-cell *matCellDef="let element"> {{element.cellular}}</td>
                </ng-container>
                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element">{{element.email}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let i = index">

                    <button mat-raised-button color="orange" matTooltip="Edit Engineer" (click)="openEditTempEngineer(i, editEngineer); modal.close('Save click')"><i class="fa fa-pencil"></i></button>
                    <button mat-raised-button color="warni" matTooltip="Delete Engineer" (click)="deleteTemporaryEngineerWithConfirmation(i);modal.close('Save click');openXl(showAddedProf);"><i class="fa fa-trash"></i></button>

                  </td>
                </ng-container>
                <!-- No Engineers Added Message -->
                <ng-container *ngIf="dataSourceTempEngineers.length === 0" matColumnDef="noEngineers">
                  <td mat-cell *matCellDef="let element" colspan="7">No engineer added</td>
                </ng-container>

                <td mat-cell *matCellDef="let element">  </td>
                <tr mat-header-row *matHeaderRowDef="displayedColumnsTempEngineers"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsTempEngineers;"></tr>

              </table>
            </div>
          </mat-tab>


          <mat-tab label="Contractors">
            <div *ngIf="dataSourceTempContractors.length === 0">
              No new contractor added for this user.
            </div>
            <div *ngIf="dataSourceTempContractors.length > 0">
              <table mat-table [dataSource]="dataSourceTempContractors" class="mat-elevation-z8">
                <ng-container matColumnDef="companyName">
                  <th mat-header-cell *matHeaderCellDef> Company Name </th>
                  <td mat-cell *matCellDef="let element">{{element.companyName}} </td>
                </ng-container>
                <ng-container matColumnDef="cidbNum">
                  <th mat-header-cell *matHeaderCellDef> CIDB Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.cidbNum}}</td>
                </ng-container>
                <ng-container matColumnDef="cidbGrade">
                  <th mat-header-cell *matHeaderCellDef> CIDB Grading </th>
                  <td mat-cell *matCellDef="let element">{{element.cidbGrade}} </td>
                </ng-container>
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef> Name </th>
                  <td mat-cell *matCellDef="let element">{{element.name}} </td>
                </ng-container>
                <ng-container matColumnDef="surname">
                  <th mat-header-cell *matHeaderCellDef> Surname </th>
                  <td mat-cell *matCellDef="let element">{{element.surname}} </td>
                </ng-container>
                <ng-container matColumnDef="cellular">
                  <th mat-header-cell *matHeaderCellDef> Cell No. </th>
                  <td mat-cell *matCellDef="let element"> {{element.cellular}}</td>
                </ng-container>
                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element">{{element.email}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let i = index">

                    <button mat-raised-button color="orange" matTooltip="Edit Contractor" (click)="openEditTempContractor(i, editContractor); modal.close('Save click');"><i class="fa fa-pencil"></i></button>
                    <button mat-raised-button color="warni" matTooltip="Delete Contractor" (click)="deleteTemporaryContractorWithConfirmation(i);modal.close('Save click');openXl(showAddedProf);"><i class="fa fa-trash"></i></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsTempContractors"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsTempContractors;"></tr>
              </table>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="openXl(Prof);modal.close('Save click')">Add Professional</button>
      <button type="button" class="btn btn-outline-success" (click)="openXl(oldProf);modal.close('Save click')">View Existing</button>
      <button type="button" class="btn btn-outline-success" (click)="saveAllEngineers();saveAllContractors();populateClientInfo();modal.close('Save click');">Create Wayleave</button>
    </div>
  </ng-template>

  <ng-template #editEngineer let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Edit selected engineer</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div modal-body>
      <form>
        <div class="row">
          <!--<div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngBPNum" [(ngModel)]="editEngBPNum" placeholder="Enter BP Number" name="editEngBPNum" />
              <label for="bpNumber">BP Num</label>
            </div>
          </div>-->
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngRegNum" [(ngModel)]="editEngRegNum" placeholder="Enter Professional Reg No." name="editEngRegNum" />
              <label for="profRegNum">Professional Reg. No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngID" [(ngModel)]="editEngID" placeholder="Enter ID Number" name="editEngID" />
              <label for="idNum">ID Number</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngName" [(ngModel)]="editEngName" placeholder="Enter Name" name="editEngName" />
              <label for="name">Name</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngSurname" [(ngModel)]="editEngSurname" placeholder="Enter Surname" name="editEngSurname" />
              <label for="surname">Surname</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngPhone" [(ngModel)]="editEngPhone" placeholder="Enter Tell No." name="editEngPhone" />
              <label for="cellular">Tell No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngEmail" [(ngModel)]="editEngEmail" placeholder="Enter Email" name="editEngEmail" />
              <label for="email">Email</label>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="saveEditedEngineerDetails(showAddedProf);modal.close('Save click')">Save Changes</button>
    </div>
  </ng-template>

  <ng-template #editContractor let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Edit selected contractor</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div modal-body>
      <form>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConCompany" [(ngModel)]="editConCompany" placeholder="Enter Company Name" name="editConCompany" />
              <label for="companyName">Company Name</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConCIDBNum" [(ngModel)]="editConCIDBNum" placeholder="Enter CIDB No." name="editConCIDBNum" />
              <label for="cidbNum">CIDB No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConCIDBRating" [(ngModel)]="editConCIDBRating" placeholder="Enter CIDB Grade" name="editConCIDBRating" />
              <label for="idNum">ID Number</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConName" [(ngModel)]="editConName" placeholder="Enter Name" name="editConName" />
              <label for="name">Name</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConSurname" [(ngModel)]="editConSurname" placeholder="Enter Surname" name="editConSurname" />
              <label for="surname">Surname</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConPhone" [(ngModel)]="editConPhone" placeholder="Enter Tell No." name="editConPhone" />
              <label for="cellular">Tell No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConEmail" [(ngModel)]="editConEmail" placeholder="Enter Email" name="editConEmail" />
              <label for="email">Email</label>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="saveEditedContractorDetails(showAddedProf);modal.close('Save click')">Save Changes</button>
    </div>
  </ng-template>

  <ng-template #oldProf let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Professionals Linked to {{selectedUserName}} </h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">
        <mat-tab-group dynamicHeight>
          <mat-tab label="Engineers">

            <div *ngIf="dataSourceEngineers.length === 0">
              There are no engineers linked to this user.
            </div>
            <div *ngIf="dataSourceEngineers.length > 0">
              <table mat-table #engineerTable [dataSource]="dataSourceEngineers" class="mat-elevation-z8">
                <!--Name, Surname, Email, Phone Number-->
                <ng-container matColumnDef="fullName">
                  <th mat-header-cell *matHeaderCellDef> Engineer's Name </th>
                  <td mat-cell *matCellDef="let element"> {{element.name}} {{element.surname}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                </ng-container>

                <ng-container matColumnDef="idNumber">
                  <th mat-header-cell *matHeaderCellDef> ID Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="phoneNumber">
                  <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.phoneNumber}} </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="displayedColumnsOldEngineers"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsOldEngineers;"></tr>
              </table>
            </div>
          </mat-tab>
          <mat-tab label="Contractors">
            <div *ngIf="dataSourceContractors.length === 0">
              There are no contractors linked to this user.
            </div>
            <div *ngIf="dataSourceContractors.length > 0">
              <table mat-table #engineerTable [dataSource]="dataSourceContractors" class="mat-elevation-z8">
                <!--Name, Surname, Email, Phone Number-->
                <ng-container matColumnDef="fullName">
                  <th mat-header-cell *matHeaderCellDef> Contractor's Name </th>
                  <td mat-cell *matCellDef="let element"> {{element.name}} {{element.surname}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                </ng-container>

                <ng-container matColumnDef="idNumber">
                  <th mat-header-cell *matHeaderCellDef> ID Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="phoneNumber">
                  <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.phoneNumber}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumnsOldContractors"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsOldContractors;"></tr>
              </table>
            </div>
          </mat-tab>

        </mat-tab-group>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="openXl(Prof);modal.close('Save click')">Add Professional</button>
      <button type="button" class="btn btn-outline-success" (click)="saveAllEngineers();saveAllContractors();populateClientInfo();modal.close('Save click');">Create Wayleave</button>
    </div>
  </ng-template>
