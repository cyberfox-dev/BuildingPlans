<app-nav-menu></app-nav-menu>
<link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700,800&display=swap" rel="stylesheet">
<link _ngcontent-ng-cli-universal-c545="" href="https://fonts.googleapis.com/css?family=Roboto:300italic,400italic,400,100,300,600,700" rel="stylesheet" type="text/css">

<head>
  <!--  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="src/assets/js/all.js"></script>
    <script src="src/assets/js/all.min.js"></script>
    <link rel="stylesheet" href="/src/assets/all.css">
    <link rel="stylesheet" href="/src/assets/all.min.css">
    <script defer src="src/assets/fontawesome-free-6.4.2-web/js/brands.js"></script>
    <script defer src="src/assets/fontawesome-free-6.4.2-web/js/solid.js"></script>
    <script defer src="src/assets/fontawesome-free-6.4.2-web/js/fontawesome.js"></script>
    <script defer src="src/assets/fontawesome-free-6.4.2-web/js/sharp-solid.js"></script>
    <script defer src="src/assets/fontawesome-free-6.4.2-web/js/custom-icons.js"></script>-->

</head>
<!--<h1>Navbar</h1>-->
<!--<button mat-fab [@fadeInAnimation]="" *ngIf="FilterBtn" class="floating-button" (click)="openSpin(spin)">-->
<!--color="configureActingDepartment"-->
<!--<img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-gear-solid.svg" class="icon">
</button>-->




<div class="container-fluid main">

  <h1 class="animationSlideUp">Hi, {{CurrentUserProfile[0].fullName}}</h1>
  <h2 class="animationSlideUp">Welcome to your Dashboard</h2>
</div>

<div class="tag-list" *ngIf="showBanner">
  <div class="loop-slider" [style.--startPoint]="tagLength">
    <div class="inner">
      <div class="tag" [style.--tagLength]="tagLength">
        {{ alertMessage }} {{showDates}}
      </div>

    </div>

  </div>
</div>
<!--Sytem Alert Kyle 12-03-24-->

<div class="cont3 ">
  <!--<img src="assets/fontawesome-free-6.4.2-web/svgs/regular/plus-solid.svg" class="icon4"> -->
  <!--<button mat-raised-button color="createWayleave" *ngIf="disableButtons ===false " class="animationSlideDown" (click)="GoToBuildingApplication(false)">Create Land Survey Application</button>-->
  <!--<button mat-raised-button color="createWayleave2" *ngIf="disableButtons === true " disabled matTooltip="Creating new applications is currently not allowed." class="animationSlideDown">Create Land Survey Application</button>-->
  <!-- Service Information Kyle 31/01/24-->
  <button mat-raised-button color="createWayleave" class="animationSlideDown" [matMenuTriggerFor]="menu2">Create New Application</button>
  <mat-menu #menu2="matMenu" xPosition="after">
    <button mat-menu-item (click)="GoToBuildingApplication(false,'ls',false)">Pre-Submission Application</button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="GoToBuildingApplication(false,'tp',false)">Town Planning Application</button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="GoToBuildingApplication(false,'bp',false)">Building Plan Application</button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="goToDemolition(false)">Demolition Application</button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="goToSignageApplication()">Signage Application</button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="goToBannerApplication(false)">Banner/Poster Application</button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="goToBannerApplication(true)">Flag/Pole/Headline Application</button>
    <mat-divider></mat-divider>
    <button mat-menu-item (click)="openArchiveOption()">Archive</button>
  </mat-menu>
  <button mat-raised-button color="createWayleave" class="animationSlideDown" (click)="GoToBuildingApplication(false,null,true)">Create Wayleave Application</button>
  
  <!-- Service Information Kyle 31/01/24-->
</div>



<div class="table container-fluid animationFadeIn">

  <div class="">

    <div class="internalFilterBtns" *ngIf="pastAndCurrentReviews">

    </div>


    <div class="table container-fluid animationFadeIn">

      <div class="">
        <div class="filterValue">
          <p>You Are Currently Viewing The 30 Latest {{applicationTypeName}} Applications </p>
        </div>
        <div class="container02">


          <button mat-button type="button" (click)="drawer.toggle()" matTooltip="Filter Applications" color="filter" aria-label="Example icon-button with a menu">
            <img src="assets/fontawesome-free-6.4.2-web/svgs/solid/filter.svg" class="icon">
          </button>
          <!--<button mat-button [matMenuTriggerFor]="menu" matTooltip="Filter Applications" color="filter" aria-label="Example icon-button with a menu" (click)="onFilterButtonClick()" *ngIf="FilterBtn">
            <img src="assets/fontawesome-free-6.4.2-web/svgs/solid/filter.svg" class="icon">
          </button>-->
          <mat-menu #menu="matMenu" yPosition="below">
            <button mat-menu-item (click)=" onFilterBPApplications('Building Plan')"><span>Building Plan Application</span></button>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)=" onFilterBPApplications('Demolition')">Demolition Application</button>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)=" onFilterBPApplications('Signage')">Signage Application</button>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)=" onFilterBPApplications('Banner')">Banner/Poster Application</button>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)=" onFilterBPApplications('Flag')">Flag/Pole/Headline Application</button>
            <mat-divider></mat-divider>
            <button mat-menu-item (click)=" onFilterBPApplications('Wayleave')">Wayleave</button>
            <mat-divider></mat-divider>
            <button mat-menu-item>Archive</button>
            <!--<button mat-menu-item (click)="onFilterApplicationsFprMyApplications()">
    <span>My Applications</span>
  </button>-->
            <!--<button mat-menu-item (click)="onFilterAPplicationsForRecentApplications()">
    <span>All Projects</span>
  </button>-->
          </mat-menu>
          <mat-form-field appearance="outline">
            <mat-label>Search</mat-label>
            <div class="cont6">

              <input matInput [(ngModel)]="searchInput" (input)=" SearchForApplication()" #input>
              <img src="assets/fontawesome-free-6.4.2-web/svgs/solid/magnifying-glass.svg" class="icon3">
            </div>

          </mat-form-field>


        </div>

      </div>

      <div class="tableContainer">
        <mat-drawer-container class="example-container">
          <mat-drawer #drawer class="example-sidenav" mode="side">
            <p>Filter Applications By :</p>
            <!-- Tabs inside the drawer -->
            <mat-tab-group [selectedIndex]="selectedTabIndex" (selectedTabChange)="onChangeDataSource($event)">
              <mat-tab label="Pre-Submission Applications"></mat-tab>
              <mat-divider></mat-divider>
              <mat-tab label="Town Planning Applications"></mat-tab>
              <mat-divider></mat-divider>
              <mat-tab label="Building Plan Applications"></mat-tab>
              <mat-divider></mat-divider>
              <mat-tab label="Demolition Application"></mat-tab>
              <mat-tab label="Sinage Application"></mat-tab>
              <mat-tab label="Banner/Poster Application"></mat-tab>
              <mat-tab label="Flag/Pole/Headline Application"></mat-tab>
              <mat-tab label="Archive Application"></mat-tab>
              <mat-tab label="All Applications"></mat-tab>
              <mat-tab label="Wayleave"></mat-tab>
            </mat-tab-group>
          </mat-drawer>

          <div class="example-sidenav-content">

            <div class="loading-screen" *ngIf="isLoading" id="loadingScreen">
              <!--<img src="assets/Loading.png" alt="" class="logo2">
    Need to have an BP relevant loading shandis-->
              <div class="shapes-5"></div>

            </div>

            <!--Land Survey Applications-->
            <ng-container *ngIf="selectedTabIndex === 0">
              <table mat-table [dataSource]="dataSourceSA" class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}} Days</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planAge}} Days</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" matTooltip="Delete Application"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns:displayedColumns;"></tr>

              </table>

            </ng-container>

            <!--Town Planning Applications-->
            <ng-container *ngIf="selectedTabIndex === 1">
              <table mat-table [dataSource]="dataSourceSA" class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}} Days</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planAge}} Days</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" matTooltip="Delete Application"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsBP"></tr>
                <tr mat-row *matRowDef="let row; columns:displayedColumnsBP;"></tr>

              </table>

            </ng-container>

            <!--Building Plans-->
            <ng-container *ngIf="selectedTabIndex === 2">
              <table mat-table [dataSource]="dataSourceSA" class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.BPApplicationID}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}}</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planAge}} Days</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" matTooltip="Delete Application"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsBP"></tr>
                <tr mat-row *matRowDef="let row; columns:displayedColumnsBP;"></tr>

              </table>

            </ng-container>

            <!--Demolition Application-->
            <ng-container *ngIf="selectedTabIndex === 3">
              <table mat-table class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}}</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planName}}</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" (click)="DeleteBuildingApplication(i)" matTooltip="Delete Application" disabled><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsBP"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsBP;"></tr>

              </table>
            </ng-container>
            <!--Sinage Application-->
            <ng-container *ngIf="selectedTabIndex === 4">
              <table mat-table class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}}</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planName}}</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" (click)="DeleteBuildingApplication(i)" matTooltip="Delete Application" disabled><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsBP"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsBP;"></tr>

              </table>

            </ng-container>

            <!--Banner/Poster Application-->
            <ng-container *ngIf="selectedTabIndex === 5">
              <table mat-table class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}}</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planName}}</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" (click)="DeleteBuildingApplication(i)" matTooltip="Delete Application" disabled><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsBP"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsBP;"></tr>

              </table>

            </ng-container>


            <!--Flag/Pole/Headline Application-->
            <ng-container *ngIf="selectedTabIndex === 6">
              <table mat-table class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}}</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planName}}</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" (click)="DeleteBuildingApplication(i)" matTooltip="Delete Application" disabled><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsBP"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsBP;"></tr>

              </table>

            </ng-container>

            <!--Archive Application-->
            <ng-container *ngIf="selectedTabIndex === 7">
              <table mat-table class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}}</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planName}}</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" (click)="DeleteBuildingApplication(i)" matTooltip="Delete Application" disabled><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsBP"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsBP;"></tr>

              </table>

            </ng-container>

            <!--All Application-->
            <ng-container *ngIf="selectedTabIndex === 8">
              <table mat-table [dataSource]="dataSourceSA" class="mat-elevation-z8 fade-in-bottom">

                <ng-container matColumnDef="lSNumber">
                  <th mat-header-cell *matHeaderCellDef> Application Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.ProjectNumber}}</td>
                </ng-container>

                <ng-container matColumnDef="ERFNumber">
                  <th mat-header-cell *matHeaderCellDef> ERF Number </th>
                  <td mat-cell *matCellDef="let element">{{element.erfNumber}} </td>
                </ng-container>

                <ng-container matColumnDef="stage">
                  <th mat-header-cell *matHeaderCellDef> Stage</th>
                  <td mat-cell *matCellDef="let element">{{element.stage}}</td>
                </ng-container>

                <ng-container matColumnDef="stageAge">
                  <th mat-header-cell *matHeaderCellDef>Stage Age </th>
                  <td mat-cell *matCellDef="let element">{{element.stageAge}}</td>
                </ng-container>

                <ng-container matColumnDef="planAge">
                  <th mat-header-cell *matHeaderCellDef>Plan Age </th>
                  <td mat-cell *matCellDef="let element">{{element.planAge}} Days</td>
                </ng-container>

                <ng-container matColumnDef="ownerName">
                  <th mat-header-cell *matHeaderCellDef>Owner Name</th>
                  <td mat-cell *matCellDef="let element">{{element.ownerName}}</td>
                </ng-container>

                <ng-container matColumnDef="propertyAddress">
                  <th mat-header-cell *matHeaderCellDef> Property Address </th>
                  <td mat-cell *matCellDef="let element">{{element.propertyAddress}}</td>
                </ng-container>

                <ng-container matColumnDef="status">
                  <th mat-header-cell *matHeaderCellDef> Status </th>
                  <td mat-cell *matCellDef="let element">{{element.status}}</td>
                </ng-container>

                <ng-container matColumnDef="dateCreated">
                  <th mat-header-cell *matHeaderCellDef> Date Created </th>
                  <td mat-cell *matCellDef="let element">{{element.dateCreated}}</td>
                </ng-container>

                <ng-container matColumnDef="dateUpdated">
                  <th mat-header-cell *matHeaderCellDef>Date Updated </th>
                  <td mat-cell *matCellDef="let element">{{element.dateUpdated}}</td>
                </ng-container>

                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef>Actions</th>
                  <td mat-cell *matCellDef="let i = index">
                    <button mat-raised-button color="blue" (click)=" ViewProject(i)" matTooltip="View Application Details"><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/eye.svg" class="icon4 blue"></button>
                    <button mat-raised-button color="warn" (click)="DeleteBuildingApplication(i)" matTooltip="Delete Application" disabled><img src="assets/fontawesome-free-6.4.2-web/svgs/solid/trash-can.svg" class="icon4 red"></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

              </table>

            </ng-container>


            <ng-container *ngIf="selectedTabIndex === 9">
             <app-create-new-application style="width:100%;"></app-create-new-application>
            </ng-container>


          </div>

          <!---Home Tabs Kyle 27-05-24 ------>


        </mat-drawer-container>
      </div>




  
      <!-- <mat-paginator [pageSize]="10" [length]="dataSource?.length" [pageSizeOptions]="[5, 10, 25, 50]"></mat-paginator>-->
      <!--  <ngb-pagination [collectionSize]="70" [(page)]="page" aria-label="Default pagination"></ngb-pagination>-->


    </div>

  </div>
  <!--JJS 02Feb changed the external user acting as internal text for the modal and made them go straight to choose an exsisting internal client-->
  <ng-template #internalOpt let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title" *ngIf="ActingAsInternal == false">As an internal applicant are you applying for :</h6>
      <h6 class="modal-title" id="modal-basic-title" *ngIf="ActingAsInternal">As an external applicant are you applying for :</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form>
        <div class="container-fluid">


          <div class="cont2">
            <button mat-raised-button color="client" [class.matactive]="option ==='internal'" (click)="cardchange('internal')" *ngIf="ActingAsInternal == false"><img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon"> Yourself</button>
            <!--<button mat-raised-button color="createWayleave" [class.matactive]="option ==='external'" (click)="cardchange('external')" *ngIf="ActingAsInternal"><img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon"> Yourself External</button>-->
            <button mat-raised-button color="client" [class.matactive]="option ==='client'" (click)="cardchange('client')"> <img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon"> Client</button>
          </div>
        </div>

      </form>
    </div>
    <div class="modal-footer">
      <!-- Service Information Kyle 31/01/24-->
      <!--<button type="button" class="btn btn-outline-success " *ngIf="gotDrafts == true && isPlanning == false " (click)="openDrafts(drafts)">View Draft Wayleaves</button>-->
      <!-- Service Information Kyle 31/01/24-->
      <button type="button" class="btn btn-outline-success" (click)="sendOption();modal.dismiss('Cross click')">Continue</button>

    </div>

  </ng-template>


  <ng-template #clientOption let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Who Are You Applying For?</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form>
        <div class="container-fluid">




          <div class="cont2">
            <button mat-raised-button color="client" [class.cardactive]="option ==='client'" (click)="cardchange('client');modal.dismiss('Cross click'); openNewClient(newClient)"> <img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon">  New Client</button>
            <!--<button mat-raised-button color="internal" (click)="openUser(user,architectClient);modal.dismiss('Cross click')" [class.cardactive]="option ==='internal'"><i class="fa fa-user" aria-hidden="true"></i> Existing Client</button>-->
            <button mat-raised-button color="internal" (click)="openExternalClient(user);modal.dismiss('Cross click')" [class.cardactive]="option ==='internal'" *ngIf="ActingAsInternal == false"><img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon">  Existing Client</button>
            <button mat-raised-button color="internal" (click)="openChoiceExternalActingAsInternal(internalUser);modal.dismiss('Cross click')" [class.cardactive]="option ==='internal'" *ngIf="ActingAsInternal"><img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon">  Existing Client</button>
          </div>
        </div>

      </form>
    </div>
    <div class="modal-footer">
      <!--  <button mat-raised-button color="save" (click)="sendOption();modal.dismiss('Cross click')"> Continue</button>-->

    </div>

  </ng-template>


  <!--  //JJS-15-02-2024 Fixing the delete drafts (wasn't deleting)-->
  <ng-template #externalOpt let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">As an external applicant are you applying for :</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form>
        <div class="container-fluid">


          <div class="cont2">
            <button mat-raised-button color="client" (click)="openNewWayleave()"><img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon"> New Application</button>
            <button mat-raised-button color="client" (click)="openDrafts(drafts)"><img src="assets/fontawesome-free-6.4.2-web/svgs/regular/user-solid.svg" class="icon"> Select From Drafts</button>

          </div>
        </div>

      </form>
    </div>


  </ng-template>

  <div class="text-center">
    <ng-template #choiceEC let-modal>
      <div class="modal-header">
        <h6 class="modal-title" id="modal-basic-title">Are you applying for an internal user or an external client?</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
      </div>
      <div class="modal-body">
        <div class="toggle-container">
          <div [class.bold-text]="!isInternalUser" class="text-left">EXTERNAL</div>
          <mat-slide-toggle [(ngModel)]="isInternalUser" class="toggle"></mat-slide-toggle>
          <div [class.bold-text]="isInternalUser" class="text-right">INTERNAL</div>
        </div>
      </div>
      <div class="modal-footer">
        <button mat-raised-button class="btn btn-outline-success" (click)="handleChoice(internalUser, user);modal.dismiss('Cross click')"> Continue</button>
      </div>
    </ng-template>
  </div>

  <!--choose existing-->
  <ng-template #user let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Choose the external client</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="clearFilter(); modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

      <div class="container-fluid">
        <mat-form-field>
          <mat-label>Filter</mat-label>
          <!--<input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>-->
          <input matInput (keyup)="applyExistingClientFilter($event)" placeholder="Ex. ium" #input>
        </mat-form-field>

        <table mat-table [dataSource]="dataSourceLinkUsers" class="mat-elevation-z8">
          <!--*ngIf="showZoneUserTable"-->

          <ng-container matColumnDef="idNumber">
            <th mat-header-cell *matHeaderCellDef> ID Number </th>
            <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
          </ng-container>

          <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef> User Name </th>
            <td mat-cell *matCellDef="let element"> {{element.fullName}} </td>
          </ng-container>


          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Select</th>
            <td mat-cell *matCellDef="let i = index">

              <mat-radio-button class="example-margin" (click)="getUserID(i)"></mat-radio-button>
            </td>

          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsLinkUsers"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsLinkUsers;"></tr>
        </table>

      </div>
      <div class="container-fluid">

      </div>
    </div>

    <div class="modal-footer">
      <button type="submit" class="btn btn-outline-success" (click)="onCreateBuildingApplication();closeModalFromModal();modal.close('Save click')">Save</button>
    </div>
  </ng-template>

  <ng-template #internalUser let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Choose the internal user</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="clearFilter(); modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">

      <div class="container-fluid">
        <mat-form-field>
          <mat-label>Filter</mat-label>
          <!--<input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>-->
          <input matInput (keyup)="applyInternalClientFilter($event)" placeholder="Ex. ium" #input>
        </mat-form-field>

        <table mat-table [dataSource]="dataSourceLinkAllUsers" class="mat-elevation-z8">
          <!--*ngIf="showZoneUserTable"-->
          <!--<ng-container matColumnDef="idNumber">
            <th mat-header-cell *matHeaderCellDef> ID Number </th>
            <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
          </ng-container>-->


          <ng-container matColumnDef="internalDepartment">
            <th mat-header-cell *matHeaderCellDef> Department </th>
            <td mat-cell *matCellDef="let element"> {{element.internalDepartment}} </td>
          </ng-container>

          <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef> User Name </th>
            <td mat-cell *matCellDef="let element"> {{element.fullName}} </td>
          </ng-container>


          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Select</th>
            <td mat-cell *matCellDef="let i = index">

              <mat-radio-button class="example-margin" (click)="getInternalUserID(i)"></mat-radio-button>
            </td>

          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsLinkAllUsers"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsLinkAllUsers;"></tr>
        </table>

      </div>
      <div class="container-fluid">

      </div>
    </div>

    <div class="modal-footer">
      <button type="submit" class="btn btn-outline-success" (click)="onCreateBuildingApplication();closeModalFromModal();modal.close('Save click')">Save</button>
    </div>
  </ng-template>
  <!--end-->
  <!--Before just adding a contractor and engineer, need to be able to check which professionals are already in the system-->
  <!--Should the external mans be able to select one?-->
  <!--This is for adding contractor & engineer-->
  <ng-template #Prof let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Add New Professional for {{selectedUserName}} </h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">
        <mat-tab-group dynamicHeight>
          <mat-tab label="Creating a new engineer">
            <!--<form>-->

            <div class="row">
              <!--<div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="BpNoApplicant" [(ngModel)]="bpNoApplicant" placeholder="Enter BP Number" name="bpNoApplicant">
                  <label for="bpNoApplicant">BP Number</label>
                </div>
              </div>-->
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="professionalRegNo" [(ngModel)]="professionalRegNo" placeholder="Professional Reg No" name="professionalRegNo">
                  <label for="professionalRegNo">Professional Reg No.</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="engineerIDNo" [(ngModel)]="engineerIDNo" placeholder="Engineer ID Number" name="engineerIDNo">
                  <label for="engineerIDNo">ID Number</label>
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="Name" [(ngModel)]="name" placeholder="Enter First Name" name="name">
                  <label for="name">Name</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="Surname" [(ngModel)]="surname" placeholder="Enter Surname" name="surname">
                  <label for="surname">Surname</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="tel" class="form-control" id="ApplicantTel" [(ngModel)]="applicantTellNo" placeholder="Enter Tell No." name="applicantTellNo">
                  <label for="applicantTellNo">Cell No.</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="email" class="form-control" id="ApplicantEmail" [(ngModel)]="applicantEmail" placeholder="Enter Email" name="applicantEmail">
                  <label for="applicantEmail">Email</label>
                </div>
              </div>
            </div>
            <!--          <button type="button" class="btn btn-outline-success" (click)="onAddEngineer()">Save</button>
            -->
            <!--<button mat-raised-button color="green" (click)="onAddEngineer()">Save</button>-->
            <div class="button-container">
              <button mat-raised-button color="green" (click)="onAddTheirEngineer(showAddedProf);modal.close('Save click');">Add Engineer</button>
              <button mat-raised-button color="green" (click)="openViewTheirProf(showAddedProf);modal.close('Save click');">Working List</button>
              <button mat-raised-button color="green" (click)="openOlderProf(oldProf);modal.close('Save click');">View Existing</button>
            </div>

          </mat-tab>
          <mat-tab label="Creating a New Contractor">
            <div class="mb-3">

              <!--<div class="row">-->
              <!--<div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="bpNoContractor" [(ngModel)]="bpNoContractor" placeholder="Enter BP Number" name="bpNoContractor">
                  <label for="bpNoContractor">BP Number</label>
                </div>
              </div>-->
              <!--          <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" id="ProfessionalRegNo" [(ngModel)]="ProfessionalRegNo" placeholder="Enter Professional Reg No" name="professionalRegNo">
                  <label for="professionalRegNo">CIDB Number</label>
                </div>
              </div>-->
              <!--</div>-->
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="contractorIDNo" [(ngModel)]="contractorIDNo" placeholder="Enter ID Number" name="contractorIDNo">
                    <label for="contractorIDNo">Company Name</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="ProfessionalRegNo" [(ngModel)]="ProfessionalRegNo" placeholder="Enter Professional Reg No" name="professionalRegNo">
                    <label for="professionalRegNo">CIDB Number</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="CIBDrating" [(ngModel)]="CIBRating" placeholder="Enter Grading" name="CIBRating">
                    <label for="CIBDrating">CIDB Grading</label>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="Name" [(ngModel)]="Name" placeholder="Enter First Name" name="name">
                    <label for="name">Name</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" id="Surname" [(ngModel)]="Surname" placeholder="Enter Surname" name="surname">
                    <label for="surname">Surname</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="tel" class="form-control" id="ContractorTell" [(ngModel)]="ContractorTell" placeholder="Enter Tell No." name="contractorTell">
                    <label for="contractorTell">Cell No.</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="email" class="form-control" id="ContractorEmail" [(ngModel)]="ContractorEmail" placeholder="Enter Email" name="contractorEmail">
                    <label for="contractorEmail">Email</label>
                  </div>
                </div>
              </div>

              <!--            <button type="button" class="btn btn-outline-success" (click)="onAddContractor()">Save</button>
              -->
              <!--<button mat-raised-button color="green" (click)="onAddContractor()">Save</button>-->
              <!--<button mat-raised-button color="green" (click)="onAddTheirContractor(showAddedProf);modal.close('Save click');">Save</button>-->
              <div class="button-container">
                <button mat-raised-button color="green" (click)="onAddTheirContractor2(showAddedProf);modal.close('Save click');">Add Contractor</button>
                <button mat-raised-button color="green" (click)="openViewTheirProf(showAddedProf);modal.close('Save click');">Working List</button>
                <button mat-raised-button color="green" (click)="openOlderProf(oldProf);modal.close('Save click');">View Existing</button>
              </div>
            </div>
          </mat-tab>
          <!--</form>-->
        </mat-tab-group>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="saveAllEngineers();saveAllContractors();populateClientInfo();modal.close('Save click');">Next</button>
    </div>
  </ng-template>




  <!--end contractor & engineer-->





  <ng-template #newClient let-modal>
    <div class="modal-header">
      <h6 class="modal-title">Add New Client Information</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">



      <div>

        <form>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientName" name="clientName" placeholder="Enter First Name">
                <label for="clientName">Name</label>
              </div>
            </div>

            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientSurname" name="clientSurname" placeholder="Enter Surname">
                <label for="clientSurname">Surname</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientIDNumber" name="clientIDNumber" placeholder="Enter Email">
                <label for="clientIDNumber">ID Number</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientEmail" name="clientEmail" placeholder="Enter Email">
                <label for="clientEmail">Email</label>
              </div>
            </div>

            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientCellNo" name="clientCellNo" placeholder="Enter Cell Number" [disabled]="existingClientCheck">
                <label for="clientCellNo">Cell Number</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="form-floating mb-3 mt-3">
              <input type="email" class="form-control" ngx-google-places-autocomplete [options]='options' #placesRef="ngx-places" (onAddressChange)="onAddressSelect($event)" [(ngModel)]="clientPhysicalAddress" [disabled]="existingClientCheck">
              <label for="applicantEmail">Address</label>
            </div>
            <div *ngIf="isArchitect">
              <input type="checkbox" name="clientCheck" (click)="CheckExistingClient()" placeholder="Does your client already have a profile" />
              <label>Does your client already have a profile ?</label>
            </div>

          </div>

        </form>
      </div>

      <br>
      <!--<button mat-raised-button color="green" (click)="onAddNewClient()">Save</button>-->
      <!--<button mat-raised-button color="green" (click)="createNewClient()">Save</button>-->

      <div class="cont889">

        <!--<button mat-raised-button color="primary" *ngIf="nextBtn" (click)="checkIfError(stepper)">Next</button>-->
        <!--I now validate when I create the client-->
        <button mat-raised-button color="green" (click)="validateClientInfo()">Save</button>


      </div>




    </div>


  </ng-template>


  <ng-template #processFlow let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Process Flow</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">

        <table mat-table [dataSource]="dataSourceViewLinkedZones" class="mat-elevation-z8">


          <ng-container matColumnDef="subDepartmentName">
            <th mat-header-cell *matHeaderCellDef>Sub Departments</th>
            <td mat-cell *matCellDef="let element"> {{element.subDepartmentName}} </td>
          </ng-container>

          <ng-container matColumnDef="zoneName">
            <th mat-header-cell *matHeaderCellDef>Zones</th>
            <td mat-cell *matCellDef="let element"> {{element.zoneName}} </td>
          </ng-container>






          <tr mat-header-row *matHeaderRowDef="displayedColumnsViewLinkedZones"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsViewLinkedZones;"></tr>
        </table>


      </div>
    </div>
    <div class="modal-footer">

      <button type="button" class="btn btn-light" (click)="modal.dismiss('Cross click')">Close</button>
    </div>

  </ng-template>


  <ng-template #spin let-modal>

    <!--    <div class="container99">
          <div class="cards2">
            <label class="card2" *ngFor="let subDept of AllSubDepartmentList; let i = index">

              {{subDept.subDepartmentName}}
            </label>
          </div>
          <div class="player">
            <div class="upper-part">
              <div class="play-icon">
                <svg width="20" height="20" fill="#2992dc" stroke="#2992dc" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="feather feather-play" viewBox="0 0 24 24">
                  <defs />
                  <path d="M5 3l14 9-14 9V3z" />
                </svg>
              </div>
              <div class="info-area" id="test">
                <label class="song-info" id="song-info-1">
                  <div class="title">Bunker</div>
                  <div class="sub-line">
                    <div class="subtitle">Balthazar</div>
                    <div class="time">4.05</div>
                  </div>
                </label>
                <label class="song-info" id="song-info-2">
                  <div class="title">Words Remain</div>
                  <div class="sub-line">
                    <div class="subtitle">Moderator</div>
                    <div class="time">4.05</div>
                  </div>
                </label>
                <label class="song-info" id="song-info-3">
                  <div class="title">Falling Out</div>
                  <div class="sub-line">
                    <div class="subtitle">Otzeki</div>
                    <div class="time">4.05</div>
                  </div>
                </label>
              </div>
            </div>
            <div class="progress-bar">
              <span class="progress"></span>
            </div>
          </div>
        </div>-->
  </ng-template>

  <ng-template #showAddedProf let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">View Professionals Added for {{selectedUserName}}</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">
        <mat-tab-group dynamicHeight>
          <mat-tab label="Engineers">
            <div *ngIf="dataSourceTempEngineers.length === 0">
              No new engineer added for this user.
            </div>
            <div *ngIf="dataSourceTempEngineers.length > 0">
              <table mat-table [dataSource]="dataSourceTempEngineers" class="mat-elevation-z8">
                <ng-container matColumnDef="bpNumber">
                  <th mat-header-cell *matHeaderCellDef> BP Number </th>
                  <td mat-cell *matCellDef="let element">{{element.bpNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="profRegNum">
                  <th mat-header-cell *matHeaderCellDef> Professional Reg No. </th>
                  <td mat-cell *matCellDef="let element">{{element.profRegNum}} </td>
                </ng-container>
                <ng-container matColumnDef="idNum">
                  <th mat-header-cell *matHeaderCellDef> ID Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.idNum}}</td>
                </ng-container>
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef> Name </th>
                  <td mat-cell *matCellDef="let element">{{element.name}} </td>
                </ng-container>
                <ng-container matColumnDef="surname">
                  <th mat-header-cell *matHeaderCellDef> Surname </th>
                  <td mat-cell *matCellDef="let element">{{element.surname}} </td>
                </ng-container>
                <ng-container matColumnDef="cellular">
                  <th mat-header-cell *matHeaderCellDef> Cell No. </th>
                  <td mat-cell *matCellDef="let element"> {{element.cellular}}</td>
                </ng-container>
                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element">{{element.email}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let i = index">

                    <button mat-raised-button color="orange" matTooltip="Edit Engineer" (click)="openEditTempEngineer(i, editEngineer); modal.close('Save click')"><i class="fa fa-pencil"></i></button>
                    <button mat-raised-button color="warni" matTooltip="Delete Engineer" (click)="deleteTemporaryEngineerWithConfirmation(i);modal.close('Save click');openXl(showAddedProf);"><i class="fa fa-trash"></i></button>

                  </td>
                </ng-container>
                <!-- No Engineers Added Message -->
                <ng-container *ngIf="dataSourceTempEngineers.length === 0" matColumnDef="noEngineers">
                  <td mat-cell *matCellDef="let element" colspan="7">No engineer added</td>
                </ng-container>

                <td mat-cell *matCellDef="let element">  </td>
                <tr mat-header-row *matHeaderRowDef="displayedColumnsTempEngineers"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsTempEngineers;"></tr>

              </table>
            </div>
          </mat-tab>


          <mat-tab label="Contractors">
            <div *ngIf="dataSourceTempContractors.length === 0">
              No new contractor added for this user.
            </div>
            <div *ngIf="dataSourceTempContractors.length > 0">
              <table mat-table [dataSource]="dataSourceTempContractors" class="mat-elevation-z8">
                <ng-container matColumnDef="companyName">
                  <th mat-header-cell *matHeaderCellDef> Company Name </th>
                  <td mat-cell *matCellDef="let element">{{element.companyName}} </td>
                </ng-container>
                <ng-container matColumnDef="cidbNum">
                  <th mat-header-cell *matHeaderCellDef> CIDB Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.cidbNum}}</td>
                </ng-container>
                <ng-container matColumnDef="cidbGrade">
                  <th mat-header-cell *matHeaderCellDef> CIDB Grading </th>
                  <td mat-cell *matCellDef="let element">{{element.cidbGrade}} </td>
                </ng-container>
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef> Name </th>
                  <td mat-cell *matCellDef="let element">{{element.name}} </td>
                </ng-container>
                <ng-container matColumnDef="surname">
                  <th mat-header-cell *matHeaderCellDef> Surname </th>
                  <td mat-cell *matCellDef="let element">{{element.surname}} </td>
                </ng-container>
                <ng-container matColumnDef="cellular">
                  <th mat-header-cell *matHeaderCellDef> Cell No. </th>
                  <td mat-cell *matCellDef="let element"> {{element.cellular}}</td>
                </ng-container>
                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element">{{element.email}} </td>
                </ng-container>
                <ng-container matColumnDef="actions">
                  <th mat-header-cell *matHeaderCellDef></th>
                  <td mat-cell *matCellDef="let i = index">

                    <button mat-raised-button color="orange" matTooltip="Edit Contractor" (click)="openEditTempContractor(i, editContractor); modal.close('Save click');"><i class="fa fa-pencil"></i></button>
                    <button mat-raised-button color="warni" matTooltip="Delete Contractor" (click)="deleteTemporaryContractorWithConfirmation(i);modal.close('Save click');openXl(showAddedProf);"><i class="fa fa-trash"></i></button>

                  </td>
                  <td mat-cell *matCellDef="let element">  </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumnsTempContractors"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsTempContractors;"></tr>
              </table>
            </div>
          </mat-tab>
        </mat-tab-group>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="openXl(Prof);modal.close('Save click')">Add Professional</button>
      <button type="button" class="btn btn-outline-success" (click)="openXl(oldProf);modal.close('Save click')">View Existing</button>
      <button type="button" class="btn btn-outline-success" (click)="saveAllEngineers();saveAllContractors();populateClientInfo();modal.close('Save click');">Create Wayleave</button>
    </div>
  </ng-template>

  <ng-template #editEngineer let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Edit selected engineer</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div modal-body>
      <form>
        <div class="row">
          <!--<div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngBPNum" [(ngModel)]="editEngBPNum" placeholder="Enter BP Number" name="editEngBPNum" />
              <label for="bpNumber">BP Num</label>
            </div>
          </div>-->
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngRegNum" [(ngModel)]="editEngRegNum" placeholder="Enter Professional Reg No." name="editEngRegNum" />
              <label for="profRegNum">Professional Reg. No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngID" [(ngModel)]="editEngID" placeholder="Enter ID Number" name="editEngID" />
              <label for="idNum">ID Number</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngName" [(ngModel)]="editEngName" placeholder="Enter Name" name="editEngName" />
              <label for="name">Name</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngSurname" [(ngModel)]="editEngSurname" placeholder="Enter Surname" name="editEngSurname" />
              <label for="surname">Surname</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngPhone" [(ngModel)]="editEngPhone" placeholder="Enter Tell No." name="editEngPhone" />
              <label for="cellular">Tell No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editEngEmail" [(ngModel)]="editEngEmail" placeholder="Enter Email" name="editEngEmail" />
              <label for="email">Email</label>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="saveEditedEngineerDetails(showAddedProf);modal.close('Save click')">Save Changes</button>
    </div>
  </ng-template>

  <ng-template #editContractor let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Edit selected contractor</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div modal-body>
      <form>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConCompany" [(ngModel)]="editConCompany" placeholder="Enter Company Name" name="editConCompany" />
              <label for="companyName">Company Name</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConCIDBNum" [(ngModel)]="editConCIDBNum" placeholder="Enter CIDB No." name="editConCIDBNum" />
              <label for="cidbNum">CIDB No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConCIDBRating" [(ngModel)]="editConCIDBRating" placeholder="Enter CIDB Grade" name="editConCIDBRating" />
              <label for="idNum">ID Number</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConName" [(ngModel)]="editConName" placeholder="Enter Name" name="editConName" />
              <label for="name">Name</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConSurname" [(ngModel)]="editConSurname" placeholder="Enter Surname" name="editConSurname" />
              <label for="surname">Surname</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConPhone" [(ngModel)]="editConPhone" placeholder="Enter Tell No." name="editConPhone" />
              <label for="cellular">Tell No.</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" id="editConEmail" [(ngModel)]="editConEmail" placeholder="Enter Email" name="editConEmail" />
              <label for="email">Email</label>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="saveEditedContractorDetails(showAddedProf);modal.close('Save click')">Save Changes</button>
    </div>
  </ng-template>

  <ng-template #oldProf let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Professionals Linked to {{selectedUserName}} </h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="container-fluid">
        <mat-tab-group dynamicHeight>
          <mat-tab label="Engineers">

            <div *ngIf="dataSourceEngineers.length === 0">
              There are no engineers linked to this user.
            </div>
            <div *ngIf="dataSourceEngineers.length > 0">
              <table mat-table #engineerTable [dataSource]="dataSourceEngineers" class="mat-elevation-z8">
                <!--Name, Surname, Email, Phone Number-->
                <ng-container matColumnDef="fullName">
                  <th mat-header-cell *matHeaderCellDef> Engineer's Name </th>
                  <td mat-cell *matCellDef="let element"> {{element.name}} {{element.surname}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                </ng-container>

                <ng-container matColumnDef="idNumber">
                  <th mat-header-cell *matHeaderCellDef> ID Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="phoneNumber">
                  <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.phoneNumber}} </td>
                </ng-container>


                <tr mat-header-row *matHeaderRowDef="displayedColumnsOldEngineers"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsOldEngineers;"></tr>
              </table>
            </div>
          </mat-tab>
          <mat-tab label="Contractors">
            <div *ngIf="dataSourceContractors.length === 0">
              There are no contractors linked to this user.
            </div>
            <div *ngIf="dataSourceContractors.length > 0">
              <table mat-table #engineerTable [dataSource]="dataSourceContractors" class="mat-elevation-z8">
                <!--Name, Surname, Email, Phone Number-->
                <ng-container matColumnDef="fullName">
                  <th mat-header-cell *matHeaderCellDef> Contractor's Name </th>
                  <td mat-cell *matCellDef="let element"> {{element.name}} {{element.surname}} </td>
                </ng-container>

                <ng-container matColumnDef="email">
                  <th mat-header-cell *matHeaderCellDef> Email </th>
                  <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                </ng-container>

                <ng-container matColumnDef="idNumber">
                  <th mat-header-cell *matHeaderCellDef> ID Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.idNumber}} </td>
                </ng-container>
                <ng-container matColumnDef="phoneNumber">
                  <th mat-header-cell *matHeaderCellDef> Phone Number </th>
                  <td mat-cell *matCellDef="let element"> {{element.phoneNumber}} </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumnsOldContractors"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsOldContractors;"></tr>
              </table>
            </div>
          </mat-tab>

        </mat-tab-group>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="openXl(Prof);modal.close('Save click')">Add Professional</button>
      <button type="button" class="btn btn-outline-success" (click)="saveAllEngineers();saveAllContractors();populateClientInfo();modal.close('Save click');">Create Wayleave</button>
    </div>
  </ng-template>

  <!--<ng-template #draft let-modal class="form-floating">
    <div class="modal-header draftHeader">
      <div class="draftCount">
        <span class="span1" style="font-size:40px">Drafted Projects Of {{this.CurrentUser.fullName}}</span>
        <span class="span1" style="font-size:20px"> You have {{this.draftsLength}} drafts out of 10 </span>
      </div>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>

    <div *ngFor="let drafts of DraftsList">
      <button class="alert alert-info drafts" role="alert" (click)=" openOptions(Options)">
        <div><span style="font-size: 20px;"> Wayleave Application for {{drafts.FullName}} Application </span></div>
        <div>
          <span style="font-size: 15px;">{{drafts.TypeOfApplication}} Application / Excavation Type: {{drafts.ExcavationType}}</span>

        </div>
        <div> <span>Created on {{drafts.DateCreated}}</span></div>
      </button>
    </div>

  </ng-template>-->

  <ng-template #drafts let-modal>

    <app-drafts></app-drafts>




  </ng-template>
  <ng-template #architects let-modal>
    <div class="modal-header">
      <h2>Select an Architect</h2>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="cont2">
      <button mat-raised-button (click)="openAddArchitect(addArchitect);modal.dismiss('Cross click')" color="action">Add New Architect</button>
    </div>
    <div>
      <p>NB* In order to add an architect , the architect must be registered and already have a profile on the system</p>
    </div>
    <table mat-table [dataSource]="dataSourceArchitects" class="mat-elevation-z8">

      <ng-container matColumnDef="fullName">
        <th mat-header-cell *matHeaderCellDef> User Name </th>
        <td mat-cell *matCellDef="let element"> {{element.ArchitectName}} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Select</th>
        <td mat-cell *matCellDef="let i = index">

          <mat-radio-button class="example-margin" (click)=" SelectArchitect(i)"></mat-radio-button>

        </td>

      </ng-container>

      <tr mat-header-row *matHeaderRowDef=" displayedColumnsArchitects"></tr>
      <tr mat-row *matRowDef="let row; columns:  displayedColumnsArchitects;"></tr>

    </table>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="onCreateBuildingApplication();modal.close('Save click')" [disabled]="saveDisabled">Save</button>
    </div>
  </ng-template>

  <ng-template #addArchitect let-modal>
    <div class="modal-header">
      <h2>Enter Architect Fullname and Email Address</h2>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectFullName" name="arcFullName" placeholder="Enter Architect Full Name">
            <label for="arcFullName">Architect Full Name</label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectEmail" name="arcEmail" placeholder="Enter Architect Email">
            <label for="arcEmail">Architect Email</label>
          </div>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-success" (click)="ValidateArchitectInfo();modal.close('Save click')">Save</button>
    </div>
  </ng-template>
  <ng-template #architectClient let-modal>
    <div class="modal-header">
      <h6 class="modal-title" id="modal-basic-title">Choose the user</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="clearFilter(); modal.dismiss('Cross click')"></button>
      <!--<h6 class="modal-title" id="modal-basic-title">Choose the user</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>-->
    </div>
    <div class="modal-body">

      <div class="container-fluid">
        <mat-form-field>
          <mat-label>Search By Name </mat-label>
          <!--<input matInput (keyup)="applyFilter($event)" placeholder="Ex. ium" #input>-->
          <input matInput *ngIf="dataSourceLinkUsers.length > 0" (keyup)="applyExistingClientFilter($event)" placeholder="Ex. ium" #input>
        </mat-form-field>

        <table mat-table *ngIf="dataSourceLinkUsers.length > 0" [dataSource]="dataSourceLinkUsers" class="mat-elevation-z8">
          <!--*ngIf="showZoneUserTable"-->

          <ng-container matColumnDef="fullName">
            <th mat-header-cell *matHeaderCellDef> User Name </th>
            <td mat-cell *matCellDef="let element"> {{element.ClientFullName}} </td>
          </ng-container>

          <ng-container matColumnDef="address">
            <th mat-header-cell *matHeaderCellDef> Address </th>
            <td mat-cell *matCellDef="let element"> {{element.ClientAddress}} </td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Select</th>
            <td mat-cell *matCellDef="let i = index">

              <mat-radio-button class="example-margin" (click)="getUserID(i)"></mat-radio-button>
            </td>

          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumnsLinkUsers"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnsLinkUsers;"></tr>
        </table>
        <div *ngIf="dataSourceLinkUsers.length == 0">
          <p>You Current have no clients saved</p>
        </div>
      </div>
      <div class="container-fluid">

      </div>
    </div>

    <div class="modal-footer">
      <button type="submit" class="btn btn-outline-success" (click)="onCreateBuildingApplication();closeModalFromModal();modal.close('Save click')">Save</button>
    </div>
  </ng-template>

  <ng-template #complaint let-modal>
    <div class="modal-header">
      <h2>New Complaint</h2>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>

    <div class="modal-body">
      <mat-horizontal-stepper linear #stepper>

        <mat-step label="Complainant's Details">

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="complainantID" name="name" placeholder="Owner First Name">
                <label for="name">ID Number *</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="complainantName" name="surname" placeholder="Owner Surname">
                <label for="surname">Full Name *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="complainantEmail" name="surname" placeholder="Owner Surname">
                <label for="surname">Email Address *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="complainantCell" name="name" placeholder="Owner First Name">
                <label for="name">Cell Number *</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="complainantTel" name="surname" placeholder="Owner Surname">
                <label for="surname">Telephone Number *</label>
              </div>
            </div>
          </div>
          <div class="stepButtons">
            <button mat-raised-button color="primary" matStepperNext>Next</button>
          </div>

        </mat-step>

        <mat-step label="Address Details">

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="name" placeholder="Owner First Name" [(ngModel)]="cadastralDescription">
                <label for="name">CadastralDescription *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="name" placeholder="Owner First Name" [(ngModel)]="streetNumber">
                <label for="name">Street Number *</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="surname" placeholder="Owner Surname" [(ngModel)]="streetName">
                <label for="surname">Street Name *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="name" placeholder="Owner First Name" [(ngModel)]="suburb">
                <label for="name">Suburb *</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="surname" placeholder="Owner Surname" [(ngModel)]="city">
                <label for="surname">City *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="name" placeholder="Owner First Name" [(ngModel)]="postalCode">
                <label for="name">Postal Code *</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="surname" placeholder="Owner Surname" [(ngModel)]="lotNumber">
                <label for="surname">Lot Number (ERF No) *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="name" placeholder="Owner First Name" [(ngModel)]="portion">
                <label for="name">Portion *</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="surname" placeholder="Owner Surname" [(ngModel)]="township">
                <label for="surname">Township</label>
              </div>
            </div>
          </div>

          <div class="stepButtons">
            <button mat-raised-button color="primary" matStepperPrevious>Back</button>

            <button mat-raised-button color="primary" matStepperNext>Next</button>
          </div>

        </mat-step>

        <mat-step label="Complaint Details">
          <mat-form-field>
            <mat-select [(ngModel)]="selectedFunctionalArea">
              <mat-option *ngFor="let area of FunctionalAreasList">{{area.FAName}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-form-field class="example-full-width">
            <mat-label>Details Of Complaint</mat-label>

            <textarea matInput [(ngModel)]="details"></textarea>

          </mat-form-field>

          <div class="stepButtons">
            <button mat-raised-button color="primary" matStepperPrevious>Back</button>
            <button type="submit" class="btn btn-outline-success" (click)=" addComplaint()">Submit</button>
          </div>

        </mat-step>
      </mat-horizontal-stepper>
    </div>
  </ng-template>
  <!----Clarifications Alerts Kyle

         <app-application-alerts></app-application-alerts>

         <!----Clarifications Alerts Kyle-->
  <ng-template #archiveOption let-modal>
    <div class="modal-header">
      <h6>Select Type Of Archive Application</h6>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>

    <div class="modal-body">
      <form>
        <div class="container-fluid">
          <div class="cont2">
            <button mat-raised-button color="client" (click)="GoToBuildingApplication(true,null,false);modal.dismiss('Cross click')"> Building Plan Archive Application</button>
            <button mat-raised-button color="client" (click)="goToDemolition(true);modal.dismiss('Cross click')"> Demolition Archive Application</button>
          </div>
        </div>

      </form>
    </div>
    <div class="modal-footer">

    </div>
  </ng-template>

