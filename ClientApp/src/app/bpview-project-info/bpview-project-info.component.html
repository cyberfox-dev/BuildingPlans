<app-nav-menu></app-nav-menu>
<link href="https://fonts.googleapis.com/css?family=Nunito:400,600,700,800&display=swap" rel="stylesheet">
<link _ngcontent-ng-cli-universal-c545="" href="https://fonts.googleapis.com/css?family=Roboto:300italic,400italic,400,100,300,600,700" rel="stylesheet" type="text/css">

<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>


<div class="content-body">
  <h2>View Project Details</h2>


  <div class="container-fluid main">
    <div class="cont3 ">
      <app-bp-action-center [ApplicationID]="applicationId" (refreshParent)="ngOnInit()" class="animationSlideUp"></app-bp-action-center>

    </div>
  </div>
  <mat-tab-group>

    <mat-tab label="Application Details">
      <div class="cont2">


        <form>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="lsNumber" name="lSNumber" placeholder="LS Number" disabled>
                <label for="lSNumber">LS Number </label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="typeOfDev" name="typeOfDev" placeholder="Type Of Development" disabled>
                <label for="typeOfDev">Type Of Development</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="typeOfAddress" name="typeOfAddress" placeholder="Type Of Address" disabled>
                <label for="tyoeOfaddress">Type Of Address</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="noOfUnits" name="NoOfUnits" placeholder="Number Of Units" disabled>
                <label for="NoOfUnits">Number Of Units</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="unitNumber" name="unitNumber" placeholder="Unit Number" disabled>
                <label for="unitNumber">Unit Number</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="propertyValue" name="propertyValue" placeholder="Property value" disabled>
                <label for="propertyValue">Property Value</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="erfNumber" name="erfNumber" placeholder="Erf Number" disabled>
                <label for="erfNumber">Erf Number</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="portionNumber" name="portionNumber" placeholder="Portion Number" disabled>
                <label for="portionNumber">Portion Number</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="premisesName" name="premisesName" placeholder="Premises Name" disabled>
                <label for="premisesName">Premises Name</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="propertyDescription" name="propertyDescription" placeholder="Property description" disabled>
                <label for="propertyDescription">Property Description</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="occupationClassification" name="occupationClass" placeholder="Occupation Classification" disabled>
                <label for="occupationClass">Occupation Classifcation</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="buildingPlanFor" name="bpFor" placeholder="Building Plan For" disabled>
                <label for="bpFor">Building Plan For</label>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="sGCode" name="sgCode" placeholder="SG Code" disabled>
                <label for="sgCode">SG Code</label>
              </div>
            </div>
            </div>

            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="physicalAddress" name="physicalAddress" placeholder="Physical Address" disabled>
                  <label for="physicalAddress">Physical Address Of Project</label>
                </div>
              </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="latitude" name="latitude" placeholder="Latitude" disabled>
                    <label for="Latitude">Latitude</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="longitude" name="longitude" placeholder="Longitude" disabled>
                    <label for="longitude">Longitude</label>
                  </div>
                </div>
              </div>
              <!---------------------Map and pinned location ------------------->
</form>

        <div class="alert alert-info" role="alert" *ngIf="OmnibusServitude">
          Applicant states that OmnibusServitude is in the title deed
        </div>
        <div class="alert alert-other" role="alert" *ngIf="!OmnibusServitude">
          Applicant states that <strong>THERE IS NO</strong> OmnibusServitude in the title deed
        </div>

      </div>
    </mat-tab>

    <mat-tab label="Property Owner Details">

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="firstName" name="firstName" placeholder="Owner Name" disabled>
            <label for="firstName">First Name</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="surname" name="surname" placeholder="Owner Surname" disabled>
            <label for="surname">Surname</label>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="idNumber" name="idNo" placeholder="ID Number" disabled>
          <label for="idNo">ID Number</label>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="email" name="email" placeholder="Email Address" disabled>
            <label for="email">Email Address</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="altEmail" name="altEmail" placeholder="Email" disabled>
            <label for="altEmail">Alternate Email Address</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="cellNo" name="cell" placeholder="Cell No" disabled>
            <label for="cell">Cellphone Number</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="altCellNo" name="altCell" placeholder="Alt Cell" disabled>
            <label for="altCell">Alternate CellPhone Number</label>
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Architect Details">

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectName" name="architectName" placeholder="Architect Full Name" disabled>
            <label for="architectName">Architect Full Name</label>
          </div>
        </div>

        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectSurname" name="architectSurname" placeholder="Architect Surname" disabled>
            <label for="architectSurname">Architect Surname</label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectId" name="architectId" placeholder="Architect ID No" disabled>
            <label for="architectId">ID Number</label>
          </div>
        </div>

        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectReg" name="architectReg" placeholder="Architect Reg No" disabled>
            <label for="architectReg">Architect Registration Number</label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectEmail" name="architectEmail" placeholder="Architect Email" disabled>
            <label for="architectEmail">Architect Email Address</label>
          </div>
        </div>

        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectCell" name="architectCell" placeholder="Architect Cell No" disabled>
            <label for="architectCell">Architect Cellphone Number</label>
          </div>
        </div>
      </div>
    </mat-tab>

    <!---------------------------------------Comments ------------------------------------------->
    <mat-tab label="Comments">
      <div class="main-container">
        <section id="timeline" class="timeline-outer">
          <div class="container" id="content">

            <div class="row" *ngFor="let commentsList of CommentsList; let i = index" [style.margin-left.px]="(i % 2 === 0) ? 60 : 80" [style.margin-right.px]="(i % 2 === 0) ? 60 : 80">
              <div class="col s12 m12 l12" *ngIf="!(commentsList.CommentStatus === 'Referred' )">
                -Change Wording Kyle 15/01/24
                <ul class="timeline" [class.approve]="commentsList.CommentStatus === 'Provisionally Approved'||commentsList.CommentStatus === 'Approved(Conditional)' " [class.finalApprove]="commentsList.CommentStatus === 'FinalApproved' || commentsList.CommentStatus === 'Final Approved'|| commentsList.CommentStatus === 'Complete' " [class.Reject]="commentsList.CommentStatus === 'FinalReject'||commentsList.CommentStatus === 'Rejected'||commentsList.CommentStatus === 'Provisionally Rejected'|| commentsList.CommentStatus === 'Final Rejected' " [class.clarify]="commentsList.CommentStatus === 'Clarify' || commentsList.CommentStatus === 'Clarified'|| commentsList.CommentStatus === 'Reviewer Clarify' || commentsList.CommentStatus == 'Applicant Clarify' || commentsList.CommentStatus ==='Applicant Clarified'" [class.reviewerClarify]="commentsList.CommentStatus === 'Reviewer Clarified' || commentsList.CommentStatus === 'Reviewer Clarity'" [class.refer]="commentsList.CommentStatus === 'Referred'" [class.returned]="commentsList.CommentStatus === 'Returned'" [class.GISReviewed]="commentsList.CommentStatus ==='GIS Reviewed'">
                  JJS 07-03-24 GIS Reviewer

                  <li class="event" data-date="">

                    -Comments Kyle 01/02/24 
                    <h3>{{commentsList.FunctionalArea}} - {{commentsList.CommentStatus}}</h3>

                    <h5 >{{commentsList.UserName}}</h5>
                    <br />
                    <div class="cont2">
                      <div [innerHTML]="sanitizeHTML(commentsList.Comment)"></div>
                      <button mat-raised-button color="blue" *ngIf="commentsList.CommentStatus != 'FinalApproved'  &&   CurrentUserProfile[0].subDepartmentName === commentsList.FunctionalArea && commentsList.UserName === this.CurrentUser.fullName" >Edit Comment</button>

                    </div>

                    <p>

                  {{commentsList.Comment}}
                </p>

                    <br />

                    <br />

                    <h6>{{commentsList.DateCreated}}</h6>
                     <!--<h6>{{commentsList.Time}}</h6>-->
                    <br />

                    <!--Applicant Clarity-->
                    <button mat-raised-button color="clarify" >Reply</button>
                    <button mat-raised-button color="clarify">Update Reply</button>
                    <div class="row" >
                      <label > <strong><em>Applicant's Reply:</em></strong></label>
                      <label > <strong><em>Reviewer's Reply:</em></strong></label>
                      <div class="form-floating mb-3 mt-3" >
                        <input type="text" class="form-control" value="{{commentsList.isApplicantReply}}" id="ApplicantReply" name="ApplicantReply" disabled> [(ngModel)]="ApplicantReply">

                        <div class="disabled-textbox" [innerHTML]="sanitizeHTML(commentsList.isApplicantReply)" id="ApplicantReply"></div>

                      </div>
                    </div>

                  </li>

                </ul>
              </div>
            </div>
          </div>

        </section>

        <br />
      </div>
    </mat-tab>

    <!-----BP Financials Kyle------>
    <mat-tab label="Financials">
      <app-bpfinancials></app-bpfinancials>
    </mat-tab>

    <!-----BP Financials Kyle------>
    <!-------------------------------------------------Document Uploads ----------------------------------------->
    <mat-tab label="Documents Upload">

      <div *ngIf="currentStage == 'LS Relaxation - Unpaid' || currentStage == 'TP Relaxation - Unpaid'">
      <mat-list *ngFor="let LSmanDoc of LSMandatoryDocuments | async; let i=index; trackBy: trackByFn" [attr.data-index]="i" >
        <mat-list-item> {{LSmanDoc.mandatoryDocumentName}}</mat-list-item>
        <mat-form-field>
          <div>
            <mat-toolbar>
              <!-- Display files names -->
              <input matInput readonly name="name" class="textFuckingBox" />
              <!-- app-file-upload Component -->

              <div class="container-fluid">
                <app-bpfile-upload [ApplicationID]="applicationId"
                                   [UploadFor]="LSmanDoc.mandatoryDocumentName"
                                   (passFileName)="onPassFileName($event,i)"
                                   (onUploadFinished)="onFileDelete($event, i)"
                                   (onUploadSuccess)="onFileUpload($event)">
                </app-bpfile-upload>
              </div>


              <!--<button *ngIf="manDoc.mandatoryDocumentName && isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="addUploader(i)">Add Another Upload</button>-->
              <!--<button mat-raised-button color="addNewUploadButtonColor" *ngIf="manDoc.mandatoryDocumentName && isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="addUploader(i)" matTooltip="Add New Upload"><i class="fa fa-plus" aria-hidden="true"></i></button>
          <button mat-raised-button color="warn" *ngIf="manDoc.mandatoryDocumentName && !isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="deleteUploader(i)" matTooltip="Delete"><i class="fa fa-trash" aria-hidden="true"></i></button>-->
              <!--  <button *ngIf="manDoc.mandatoryDocumentName && !isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="deleteUploader(i)">Delete</button>-->
            </mat-toolbar>
          </div>
        </mat-form-field>
      </mat-list>
        </div>

      <div class="container04">
        <mat-progress-bar mode="indeterminate" *ngIf="successfulUploads >0 && successfulUploads < totalDocs"></mat-progress-bar>

        <!--  <img src="assets/Loading.png" *ngIf="successfulUploads >0 && successfulUploads < totalDocs" class="logo2">-->
        <p *ngIf="successfulUploads >0 && successfulUploads < totalDocs">Uploading Documents. You may continue to upload remaining documents if needed.</p>


      </div>


            <app-documents-component></app-documents-component>



    </mat-tab>
    <mat-tab label="Stage Checklist">
      <!--<app-bpview-stage-checklist [functionalArea]="functionalArea"
                                [stageName]="currentStage">

    </app-bpview-stage-checklist>-->
    </mat-tab>


    <mat-tab label="Department Checklist">

    </mat-tab>

<!--    <mat-tab label="Land Survey Upload Checklist" *ngIf="currentStage == 'LS Relaxation - Unpaid'">

    </mat-tab>-->


  </mat-tab-group>
</div>

<ng-template #UploadProof let-modal>

  <div class="modal-header">
    <h4 class="modal-title">Upload Proof of Payment For Relaxation Invoice</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>

  <div class="modal-body">

  </div>

  <div class="modal-footer">
    <button type="submit" class="btn btn-outline-success" (click)="modal.close('Save click')">Save</button>
  </div>
</ng-template>
