<app-nav-menu></app-nav-menu>



<app-internal-option (optionEvent)="reciveOption($event)" *ngIf="internal"></app-internal-option>



<div class="content-body">
  <h2>Create new wayleave</h2>


  <!--Stepper-->
  <mat-horizontal-stepper  linear #stepper >

    <!---------------------------------------------------------------Application Details----------------------------------------------------------->

    <mat-step>

      <form>
        <ng-template matStepLabel>Application details</ng-template>
        <div class="detials">
          <div class="card">
            <h3><span>Applicant details</span></h3>
          </div>

          <!------------------------------------------------------------EXTERNAL------------------------------------------------------------------>
          <!--<app-external-details *ngIf="external"></app-external-details>-->
          <div *ngIf="external">
            <div class="row">

              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="externalBPNumber" id="BPNumber" name="BPNumber" disabled>
                <label for="name">BP Number</label>
              </div>





            </div>

            <!--Displaying the applicants information into textboxes-->

            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="externalName" id="externalName" name="externalName" disabled>
                  <label for="name">Name</label>
                </div>
              </div>

              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="externalSurname" id="externalSurname" name="externalSurname" disabled>
                  <label for="name">Surname</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="externalAddress" id="externalAddress" name="externalAddress" disabled>
                  <label for="name">Physical Address</label>
                </div>
              </div>

              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="externalEmail" id="externalEmail" name="externalEmail" disabled>
                  <label for="name">Email</label>
                </div>
              </div>
            </div>

          </div>
          <!------------------------------------------------------------INTERNAL---------------------------------------------------------------->
          <!-- <app-internal-details *ngIf="internal"></app-internal-details>-->
          <div *ngIf="internal">








            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="internalName" id="InternalName" placeholder="Enter First Name" name="name" disabled>
                  <label for="name">Name</label>
                </div>
              </div>

              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="internalSurname" id="Surname" placeholder="Enter Surname" name="surname" disabled>
                  <label for="name">Surname</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="internalDepartmentName" id="internalDepartment" placeholder="Enter Address" name="internalDepartment" disabled>
                  <label for="name">Department</label>
                </div>
              </div>

              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="internalBranch" id="internalBranch" placeholder="Enter Branch" name="Branch" disabled>
                  <label for="name">Branch</label>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="internalCostCenterNumber" id="internalCostCenterNumber" placeholder="Enter CostCenterNumber" name="internalCostCenterNumber" disabled>
                  <label for="name">Cost Center Number</label>
                </div>
              </div>

              <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="internalCostCenterOwner" id="internalCostCenterOwner" placeholder="Enter internalCostCenterOwner" name="internalCostCenterOwner" disabled>
                  <label for="name">Cost Center Owner</label>
                </div>
              </div>
            </div>

          </div>

          <!-- <app-client-details *ngIf="client"></app-client-details>-->
          <!------------------------------------------------------------CLIENT---------------------------------------------------------------->

          <div *ngIf="client">
            <div class="container-fluid">



              <!--<form>-->
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientName" name="clientName" placeholder="Enter First Name">
                    <label for="clientName">Name</label>
                  </div>
                </div>

                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientSurname" name="clientSurname" placeholder="Enter Surname">
                    <label for="clientSurname">Surname</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientEmail" name="clientEmail" placeholder="Enter Email">
                    <label for="clientEmail">Email</label>
                  </div>
                </div>

                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientCellNo" name="clientCellNo" placeholder="Enter Cell Number">
                    <label for="clientCellNo">Cell Number</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientIDNumber" placeholder="Enter ID Number">
                    <label for="extApplicantIDNumber">ID Number</label>
                  </div>
                </div>

                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientRefNo" name="clientRefNo" placeholder="Enter Ref No">
                    <label for="clientRefNo">Reference Number</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientBPNum" placeholder="Enter BP Number">
                    <label for="bpNoApplicant">BP Number</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientCompanyName" placeholder="Enter Company Name">
                    <label for="address">Company Name</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientCompanyRegNo" placeholder="Enter Company Reg No">
                    <label for="address">Company Reg No.</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="email" class="form-control" [(ngModel)]="clientCompanyType" placeholder="Select Company Type">
                    <label for="applicantEmail">Company Type</label>
                  </div>
                </div>
              </div>
              <div class="row">

                <div class="form-floating mb-3 mt-3">
                  <!--<input type="text" class="form-control" [(ngModel)]="extApplicantPhyscialAddress" placeholder="Enter Address">-->
                  <input ngx-google-places-autocomplete class="form-control" [options]='options' #placesRef="ngx-places" (onAddressChange)="handleAddressChange($event)" />
                  <label for="applicantTellNo">Physcial Address</label>
                </div>



              </div>
              <!--</form>-->
            </div>

          </div>


          <!--the applicant selecting an engineer-->
          <div class="card">
            <h3><span>Please select an engineer</span></h3>
          </div>

          <!--Table displaying the engineers-->
          <app-select-engineer-table [PrfessionalType]='Engineer'></app-select-engineer-table>

          <!--SELECT ENGINEER-->
          <!--<table mat-table [dataSource]="dataSourceEngineers" class="mat-elevation-z8 demo-table">-->
          <!-- Name  -->
          <!--<ng-container matColumnDef="ProfessinalType">
        <th mat-header-cell *matHeaderCellDef>Professional Type</th>
        <td mat-cell *matCellDef="let element">{{element.ProfessinalType}}</td>
      </ng-container>-->
          <!-- Surname -->
          <!--<ng-container matColumnDef="professionalRegNo">
        <th mat-header-cell *matHeaderCellDef>Professional Reg No.</th>
        <td mat-cell *matCellDef="let element">{{element.professionalRegNo}}</td>
      </ng-container>-->
          <!-- Profession Reg no -->
          <!--<ng-container matColumnDef="bpNumber">
        <th mat-header-cell *matHeaderCellDef>BP Number</th>
        <td mat-cell *matCellDef="let element">{{element.bpNumber}}</td>
      </ng-container>-->
          <!-- BP number -->
          <!--<ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let element">{{element.name}}</td>
      </ng-container>-->
          <!-- Name  -->
          <!--<ng-container matColumnDef="surname">
        <th mat-header-cell *matHeaderCellDef>Surname</th>
        <td mat-cell *matCellDef="let element">{{element.surname}}</td>
      </ng-container>-->
          <!-- Surname -->
          <!--<ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let element">{{element.email}}</td>
      </ng-container>-->
          <!-- Profession Reg no -->
          <!--<ng-container matColumnDef="phoneNumber">
        <th mat-header-cell *matHeaderCellDef>Phone Number</th>
        <td mat-cell *matCellDef="let element">{{element.phoneNumber}}</td>
      </ng-container>-->
          <!-- Profession Reg no -->
          <!--<ng-container matColumnDef="idNumber">
          <th mat-header-cell *matHeaderCellDef>ID Number</th>
          <td mat-cell *matCellDef="let element">{{element.idNumber}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row
            (click)="clickedRowsEngineers.add(row)"
            [class.demo-row-is-clicked]="clickedRowsEngineers.has(row)"
            *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>-->
          <!--   <button class="refresh" (click)="clearAllEngineers()"><i class="fa fa-refresh" aria-hidden="true"></i></button>-->
          <!--the applicant selecting an contractor-->
          <div class="card">
            <h3><span>Please select a contractor</span></h3>
          </div>
          <app-select-engineer-table [PrfessionalType]='Contractor'></app-select-engineer-table>

          <!--Table displaying the contractors-->
          <!--  <app-select-contractor-table></app-select-contractor-table>-->
          <!--SELECT CONTRACTOR-->
          <!--<table mat-table [dataSource]="dataSourceContractors" class="mat-elevation-z8 demo-table">-->
          <!-- Name  -->
          <!--<ng-container matColumnDef="ProfessinalType">
        <th mat-header-cell *matHeaderCellDef>Professional Type</th>
        <td mat-cell *matCellDef="let contractor">{{contractor.ProfessinalType}}</td>
      </ng-container>-->
          <!-- Surname -->
          <!--<ng-container matColumnDef="professionalRegNo">
        <th mat-header-cell *matHeaderCellDef>Professional Reg No.</th>
        <td mat-cell *matCellDef="let contractor">{{contractor.professionalRegNo}}</td>
      </ng-container>-->
          <!-- Profession Reg no -->
          <!--<ng-container matColumnDef="bpNumber">
        <th mat-header-cell *matHeaderCellDef>BP Number</th>
        <td mat-cell *matCellDef="let contractor">{{contractor.bpNumber}}</td>
      </ng-container>-->
          <!-- BP number -->
          <!--<ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let contractor">{{contractor.name}}</td>
      </ng-container>-->
          <!-- Name  -->
          <!--<ng-container matColumnDef="surname">
        <th mat-header-cell *matHeaderCellDef>Surname</th>
        <td mat-cell *matCellDef="let contractor">{{contractor.surname}}</td>
      </ng-container>-->
          <!-- Surname -->
          <!--<ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef>Email</th>
        <td mat-cell *matCellDef="let contractor">{{contractor.email}}</td>
      </ng-container>-->
          <!-- Profession Reg no -->
          <!--<ng-container matColumnDef="phoneNumber">
        <th mat-header-cell *matHeaderCellDef>Phone Number</th>
        <td mat-cell *matCellDef="let contractor">{{contractor.phoneNumber}}</td>
      </ng-container>-->
          <!-- Profession Reg no -->
          <!--<ng-container matColumnDef="idNumber">
          <th mat-header-cell *matHeaderCellDef>ID Number</th>
          <td mat-cell *matCellDef="let contractor">{{contractor.idNumber}}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsContractors"></tr>
        <tr mat-row
            (click)="clickedRowsContractors.add(row)"
            [class.demo-row-is-clicked]="clickedRowsContractors.has(row)"
            *matRowDef="let row; columns: displayedColumnsContractors;"></tr>
      </table>





      <button class="refresh" (click)="clearAllContractors()"><i class="fa fa-refresh" aria-hidden="true"></i></button>-->


        </div>


      </form>
      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious disabled>Back</button>
        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>

    <!---------------------------------------------------------------Project Details----------------------------------------------------------->
    <mat-step>
      <form>



        <ng-template matStepLabel>Project Details</ng-template>
        <div class="card">
          <h3><span>Project Details</span></h3>
        </div>
        <!--enterning project details-->
        <!--<app-project-details></app-project-details>-->

        <div class="form-floating ">
          <select class="form-select" [(ngModel)]="typeOfApplication" name="typeOfApplication" aria-label="Default select example" placeholder="Type of application">
            <option selected>Type of application</option>
            <option value="Small">Small</option>
            <option value="Medium">Medium</option>
            <option value="Large">Large</option>
            <option value="Emergency">Emergency</option>
          </select>

        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="notificationNumber" id="NotificationNo" placeholder="Enter Notification Number" name="notificationNo">
              <label for="name">Notification Number</label>
            </div>
          </div>

          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="wbsNumber" id="WBSNo" placeholder="Enter WBS Number" name="wbsNo">
              <label for="name">WBS Number</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="physicalAddressOfProject" id="Address" placeholder="Enter Address" name="physicalAddressOfProject">
              <label for="name">Physical Address</label>
            </div>
          </div>

          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="descriptionOfProject" id="Description" placeholder="Enter Description" name="descriptionOfProject">
              <label for="name">Description of Proposed Construction Work</label>
            </div>
          </div>
        </div>




        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="natureOfWork" id="Email" placeholder="Enter Email" name="natureOfWork">
              <label for="name">Type/Nature of works to be undertaken</label>
            </div>
          </div>
        </div>



        <div class="row">
          <div class="typeOfExcavation">

            <div class="card">
              <h3><span>Type of excavation</span></h3>
            </div>
            <div class="container-fluid">
              <mat-button-toggle-group [(ngModel)]="excavationType" name="excavationType" aria-label="Font Style">
                <mat-button-toggle value="Hand Excavation">Hand Excavation</mat-button-toggle>
                <mat-button-toggle value="Machine Excavation">Machine Excavation</mat-button-toggle>
                <mat-button-toggle value="Drilling">Drilling</mat-button-toggle>
              </mat-button-toggle-group>
            </div>
          </div>
        </div>



        <div class="card">
          <h3><span>Expected Start & End Dates </span></h3>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="date" class="form-control" [(ngModel)]="expectedStartDate" id="startDate" placeholder="Enter Start Date" name="expectedStartDate">
              <label for="name">Start Date</label>
            </div>
          </div>

          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="date" class="form-control" [(ngModel)]="expectedEndType" id="endDate" placeholder="" name="expectedEndType">
              <label for="name">Completion Date</label>
            </div>
          </div>
        </div>

        <!---------------------------------------------------------------Map----------------------------------------------------------->
        <div class="card">
          <h3><span>Location</span></h3>
        </div>
        <!--<app-project-details-map *ngIf="map"></app-project-details-map>-->
        <div *ngIf="map">
          <div class="container-fluid">
            <div class="alert alert-warning">
          <h4>Please draw a polygon around the area of interest, Below you will find buttons relating to their function. Please select draw to begin drawing. Once you are done drawing you may click save to commit this drawing or if you feel that you have made a mistake feel free to retry by clicking edit, and then on save.</h4>
</div>
            </div>
          <app-project-details-map></app-project-details-map>



        </div>

      </form>
      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>





    <!---------------------------------------------------------------uploading docs----------------------------------------------------------->

    <mat-step>
      <form>
        <ng-template matStepLabel>checklist and document uploads</ng-template>


        <!--<app-checklist-details (newItemEvent)="StepSave(6,$event)"></app-checklist-details>-->

      </form>
      <mat-list>
        <mat-list-item>Cover letter explaning the extent of the work</mat-list-item>
        <mat-form-field>
          <div>



            <mat-toolbar>
              <!-- Display files names -->
              <input matInput [(ngModel)]="fileAttr" readonly name="uploadFileEvtCoverLetter" />
              <!-- Browse Button -->
              <button mat-raised-button color="primary"><i class="fa fa-upload" aria-hidden="true"></i></button>
              <!--<button mat-flat-button color="primary"><i class="fa fa-upload" aria-hidden="true"></i></button>-->




            </mat-toolbar>


            <!-- Fetch selected filed on change -->
            <input type="file"
                   #fileInput
                   id="uploadFileEvtCoverLetter"
                   (change)="uploadFileEvtCoverLetter($event)"
                   name="uploadFileEvtCoverLetter"
                   multiple="multiple"
                   accept="*" />
          </div>
        </mat-form-field>
        <button mat-raised-button color="warn"><i class="fa fa-trash" aria-hidden="true"></i></button>

        <mat-list-item>Drawing showing the proposed route and detail regarding the trench cross section, number of pipes etc.</mat-list-item>
        <mat-form-field>
          <div>

            <mat-toolbar>
              <!-- Display files names -->
              <input matInput [(ngModel)]="fileAttr" readonly name="name" />
              <!-- Browse Button -->
              <button mat-raised-button color="primary"><i class="fa fa-upload" aria-hidden="true"></i></button>
            </mat-toolbar>
            <!-- Fetch selected filed on change -->
            <input type="file"
                   #fileInput
                   id="uploadFile"
                   (change)="coverLetterUpload($event)"
                   name="uploadFile"
                   multiple="multiple"
                   accept="image/*" />
          </div>
        </mat-form-field>
        <button mat-raised-button color="warn"><i class="fa fa-trash" aria-hidden="true"></i></button>
        <mat-list-item>A programme with proposed timelines</mat-list-item>
        <mat-form-field>
          <div>

            <mat-toolbar>
              <!-- Display files names -->
              <input matInput [(ngModel)]="fileAttr" readonly name="name" />
              <!-- Browse Button -->
              <button mat-raised-button color="primary"><i class="fa fa-upload" aria-hidden="true"></i></button>
            </mat-toolbar>
            <!-- Fetch selected filed on change -->
            <input type="file"
                   #fileInput
                   id="uploadFile"
                   (change)="uploadFileEvt($event)"
                   name="uploadFile"
                   multiple="multiple"
                   accept="image/*" />
          </div>
        </mat-form-field>
        <button mat-raised-button color="warn"><i class="fa fa-trash" aria-hidden="true"></i></button>
        <mat-list-item>Proof and payment</mat-list-item>
        <mat-form-field>
          <div>

            <mat-toolbar>
              <!-- Display files names -->
              <input matInput [(ngModel)]="fileAttr" readonly name="name" />
              <!-- Browse Button -->
              <button mat-raised-button color="primary"><i class="fa fa-upload" aria-hidden="true"></i></button>
            </mat-toolbar>
            <!-- Fetch selected filed on change -->
            <input type="file"
                   #fileInput
                   id="uploadFile"
                   (change)="uploadFileEvt($event)"
                   name="uploadFile"
                   multiple="multiple"
                   accept="image/*" />
          </div>
        </mat-form-field>
        <button mat-raised-button color="warn"><i class="fa fa-trash" aria-hidden="true"></i></button>
      </mat-list>

      <div class="row">

        <!--   <button type="submit" class="submit" (click)="onWayleaveCreate()">Create Invoice</button>-->
        <button mat-raised-button color="green" (click)="onWayleaveCreate()">Create Invoice</button>
      </div>

      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious >Back</button>
    
      </div>
    </mat-step>


  </mat-horizontal-stepper>
</div>
