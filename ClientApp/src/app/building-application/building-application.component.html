<app-nav-menu></app-nav-menu>

<div class="content-body">
  <h2 *ngIf="applicationBeingCreatedType == 'Town Planning' || applicationBeingCreatedType == 'Building Plans'">Creating New Application - {{applicationBeingCreatedType}} </h2>
  <h2 *ngIf="applicationBeingCreatedType == 'Land Survey'">Creating New Building Plan Application - Land Survey <button mat-raised-button color="draft" *ngIf=""class="floating-button2">Save project as a draft</button></h2>
  <h2 *ngIf="isArchivePlan">Create New Plan Archive Application</h2>
  <!-- #region land survey -->

  

  <mat-horizontal-stepper linear *ngIf="applicationBeingCreatedType == 'Land Survey'">

    <mat-step>
      <form>
        <ng-template matStepLabel>Client Details</ng-template>
        <div class="detials">
          <div class="card">
            <h3><span>Client details</span></h3>
          </div>
        </div>

        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="clientName" name="name" placeholder="Owner First Name">
              <label for="name">First Name</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="clientSurname" name="surname" placeholder="Owner Surname">
              <label for="surname">Surname</label>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="clientEmail" name="emailAddress" placeholder="Enter Email Address">
              <label for="emailAddress">Email Address</label>
            </div>
          </div>
          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="clientCell" name="cellNumber" placeholder="Enter Cell Number">
              <label for="cellNumber">Cell Number</label>
            </div>
          </div>
        </div>

        <!--        <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientAltEmail" name="altEmail" placeholder="Enter alternate email address">
                    <label for="=altEmail">Alternate Email Address</label>
                  </div>
                </div>
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="clientAltCell" name="clientAltCell" placeholder="Enter alternate Cell Number">
                    <label for="altCellNo">Alternate Cell Number</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <div class="form-floating mb-3 mt-3">
                    <input type="text" class="form-control" [(ngModel)]="regNo" name=" regNo" placeholder="Reg Number">
                    <label for="regNo"> Architect Registration Number</label>
                  </div>
                </div>
              </div>-->
        <!--        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="clientIDNo" name="iDNumber" placeholder="Enter ID Number">
            <label for="=iDNumber"> ID Number *  </label>
          </div>
        </div>-->




      </form>
      <div class="cont">


        <!--<button type="submit" class="btn btn-outline-success" (click)="CheckOwnerInfo()">Save</button>-->
        <button mat-raised-button color="primary" matStepperNext>Next</button> <!-- to be disabled using validClientInfo-->
      </div>

    </mat-step>

    <!---------------------------------------------------------------Property Details--------------------------------------------------------->
    <mat-step label="Property Details">

     

      <div class="card">
        <h3><span>Property Details Of Development</span></h3>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="propertyDescription" name="propertyDescription" placeholder="Enter property description ">
            <label for="propertyDescription">Property Description *</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="premisesName" name="premisesName" placeholder="Enter premises name">
            <label for="premisesName">Premises Name *</label>
          </div>
        </div>
      </div>

      <div class="row">
        <mat-form-field>
          <mat-label>Address Type*</mat-label>
          <mat-select [(ngModel)]="addressType" name="addressType" (selectionChange)="onCheckAddressType()">
            <mat-option *ngFor="let address of addressTypesList" value="{{address.TypeName}}">{{address.TypeName}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="number" class="form-control" [(ngModel)]="NoOfUnits" name="NoOfUnits" placeholder="Enter number of units" min="1">
            <label for="NoOfUnits">Number of Units *</label>
          </div>
        </div>
        <div class="col" *ngIf="isInputDisabled == false && addressType && addressType != 'Household'">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="unitNo" name="UnitNo" placeholder="Enter unit number">
            <label for="UnitNo">{{addressType}} Number *</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="erfNo" name="erfNo" placeholder="Enter Erf Number">
            <label for="erfNo">Erf Number *</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="portionNo" name="portionNo" placeholder="Enter Portion Number">
            <label for="portionNo">Portion Number *</label>
          </div>
        </div>
      </div>
      <div class="col">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="sGCode" name="sGCode" placeholder="SG Code" minlength="21" maxlength="21" required>
          <label for="sGCode">SG Code</label>
        </div>

      </div>


      <div class="card" *ngIf="map">
        <h3><span>Location</span></h3>
      </div>

      <!--<div *ngIf="map"> <app-project-details-map [data]="ARCGISAPIData"></app-project-details-map></div>-->
      <app-google-maps-component></app-google-maps-component>
      <div class="cont">

        <button mat-raised-button color="primary" matStepperPrevious>Back</button>

        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>

    <!----------------------------------------------Architect Details ------------------------------------------------->
    <mat-step label="Architect Details">

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]=" architectName" name=" architectName" placeholder="Architect Name">
            <label for=" architectName"> Full Name</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectEmail" name="architectEmail" placeholder="Architect Email">
            <label for="architectEmail">Email Address</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectCell" name=" architectCell" placeholder="Architect Cell">
            <label for=" architectCell"> Cellphone Number</label>
          </div>
        </div>
        <!--        <div class="col">
                <div class="form-floating mb-3 mt-3">
                  <input type="text" class="form-control" [(ngModel)]="architectID" name="architectID" placeholder="Architect ID">
                  <label for="architectID">ID Number</label>
                </div>
              </div>-->
      </div>



      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>
    <!-------------------------------------------------------------------Plan Details--------------------------------------------->
    <mat-step label="Plan Details">

      <div class="col">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="buildingPlansFor" name="plansFor" placeholder="Postal Code">
          <label for="planFor">Bulding Plans For *</label>
        </div>
      </div>

      <div class="row">
        <mat-form-field>
          <mat-label>Type Of Development *</mat-label>
          <mat-select [(ngModel)]="typeOfDevelopment" name="typeOfDevelopment" (selectionChange)="getDocsForApplication() ">
            <mat-option value="Domestic">Domestic</mat-option>
            <mat-option value="Commercial">Commercial</mat-option>
          </mat-select>
        </mat-form-field>
      </div>


      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="totalArea" name="totalArea" placeholder="Total Area">
            <label for="totalArea">Total Area(meters squared)</label>
          </div>
        </div>
      </div>

      <button mat-raised-button (click)="openClassification()" color="action">Select Occupation Classification</button>

      <div class="row" *ngIf="Classification">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="Classification" name="occupationClassification" placeholder="Occupation Classification">
            <label for="occupationClassification">Occupation Classification</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <mat-checkbox (change)="onServitudeCheck()" [checked]="servitudeBox">Omnibus Servitude In Title Deed</mat-checkbox>
        </div>
      </div>

      <div class="row">
        <div class="col" *ngIf="isInternal">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="planFees" name="Fees" placeholder="Plan Fees">
            <label for="Fees">Plan Fees(R)</label>
          </div>
        </div>

        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="propertyValue" name="propertyValue" placeholder="Property Value">
            <label for="propertyValue">Property Value(R)</label>
          </div>
        </div>
      </div>

      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>

    </mat-step>
    <!---------------------------------------------------------------uploading docs----------------------------------------------------------->

    <mat-step>
      <form>
        <ng-template matStepLabel>Document Uploads</ng-template>
      </form>
      <!--<mat-list *ngFor="let manDoc of MandatoryDocumentsLinkedStagesList | async; let i=index; trackBy: trackByFn" [attr.data-index]="i">-->
      <mat-list *ngFor="let manDoc of BPMandatoryDocumentList | async; let i=index; trackBy: trackByFn" [attr.data-index]="i">
        <mat-list-item> {{manDoc.mandatoryDocumentName}}</mat-list-item>
        <mat-form-field>
          <div>
            <mat-toolbar>
              <!-- Display files names -->
              <input matInput readonly name="name" class="textFuckingBox" />
              <!-- app-file-upload Component -->

              <div class="container-fluid">
                <app-bpfile-upload [ApplicationID]="applicationID"
                                   [UploadFor]="manDoc.mandatoryDocumentName"
                                   (passFileName)="onPassFileName($event,i)"
                                   (onUploadFinished)="onFileDelete($event,i)"
                                   (onUploadSuccess)="onFileUpload($event)">
                </app-bpfile-upload>
              </div>


              <!--<button *ngIf="manDoc.mandatoryDocumentName && isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="addUploader(i)">Add Another Upload</button>-->
              <!--<button mat-raised-button color="addNewUploadButtonColor" *ngIf="manDoc.mandatoryDocumentName && isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="addUploader(i)" matTooltip="Add New Upload"><i class="fa fa-plus" aria-hidden="true"></i></button>
              <button mat-raised-button color="warn" *ngIf="manDoc.mandatoryDocumentName && !isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="deleteUploader(i)" matTooltip="Delete"><i class="fa fa-trash" aria-hidden="true"></i></button>-->
              <!--  <button *ngIf="manDoc.mandatoryDocumentName && !isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="deleteUploader(i)">Delete</button>-->
            </mat-toolbar>
          </div>
        </mat-form-field>
      </mat-list>

      <div class="container04">
        <mat-progress-bar mode="indeterminate" *ngIf="successfulUploads >0 && successfulUploads < totalDocs"></mat-progress-bar>

        <!--        <button mat-raised-button color="green" *ngIf="successfulUploads == totalDocs" (click)="buildProjectNumber()">
                Create Application
              </button>-->
        <button class="pushable" *ngIf="successfulUploads == totalDocs" (click)="buildProjectNumber()">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Create Application</span>
        </button>

        <!--  <img src="assets/Loading.png" *ngIf="successfulUploads >0 && successfulUploads < totalDocs" class="logo2">-->
        <p *ngIf="successfulUploads >0 && successfulUploads < totalDocs">Uploading Documents. You may continue to upload remaining documents if needed.</p>

      </div>

      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
      </div>
    </mat-step>

  </mat-horizontal-stepper>

  <!-- #endregion -->
  <!-- #region Town Planning -->


  <mat-horizontal-stepper linear *ngIf="applicationBeingCreatedType == 'Town Planning'">

    <mat-step>
      <form>
        <ng-template matStepLabel>Owner Details</ng-template>
        <div class="detials">
          <div class="card">
            <h3><span>Property Owner details</span></h3>
          </div>
        </div>
        <br>
        <mat-form-field>
          <mat-label>Application For</mat-label>
          <mat-select [(ngModel)]="TPTOA2" name="addressType" (selectionChange)="TypeOfApplicationDropDown2()">
            <mat-option value="indi">Individual</mat-option>
            <mat-option value="company">Company</mat-option>

          </mat-select>
        </mat-form-field>


        <div *ngIf="indi">
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientName" name="name" placeholder="Owner First Name">
                <label for="name">Owner First Name *</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientSurname" name="surname" placeholder="Owner Surname">
                <label for="surname">Owner Surname *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientEmail" name="emailAddress" placeholder="Enter Email Address">
                <label for="emailAddress">Email Address * </label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientCell" name="cellNumber" placeholder="Enter Cell Number">
                <label for="cellNumber">Tel/Cellphone Number *</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientAltEmail" name="altEmail" placeholder="Enter alternate email address">
                <label for="=altEmail"> Alternate Email Address  </label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="clientAltCell" name="clientAltCell" placeholder="Enter alternate Cell Number">
                <label for="altCellNo"> Alternate Cell Number </label>
              </div>
            </div>
          </div>
          <!--        <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="clientIDNo" name="iDNumber" placeholder="Enter ID Number">
              <label for="=iDNumber"> ID Number *  </label>
            </div>
          </div>-->
        </div>
        <div *ngIf="company">
          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="NameOfCompany" name="NoOfUnits" placeholder="Enter number of units">
                <label for="NoOfUnits">Name Of Company/Trust</label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" [(ngModel)]="RegNoOfCompany" name="NoOfUnits" placeholder="Enter number of units">
                <label for="NoOfUnits">Registration No. Of Company/Trust</label>
              </div>
            </div>
          </div>
          <!--<div class="col" *ngIf="isInputDisabled == false && addressType && addressType != 'Household'">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="unitNo" name="UnitNo" placeholder="Enter unit number">
              <label for="UnitNo">{{addressType}} Number *</label>
            </div>
          </div>-->

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                m

                <input type="text" class="form-control" name="emailAddress" placeholder="Enter Email Address">
                <label for="emailAddress">Email Address * </label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="cellNumber" placeholder="Enter Cell Number">
                <label for="cellNumber">Tel/Cellphone Number*</label>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="altEmail" placeholder="Enter alternate email address">
                <label for="=altEmail"> Alternate Email Address  </label>
              </div>
            </div>
            <div class="col">
              <div class="form-floating mb-3 mt-3">
                <input type="text" class="form-control" name="clientAltCell" placeholder="Enter alternate Cell Number">
                <label for="altCellNo"> Alternate Cell Number </label>
              </div>
            </div>
          </div>
        </div>


      </form>
      <div class="cont">


        <!--<button type="submit" class="btn btn-outline-success" (click)="CheckOwnerInfo()">Save</button>-->
        <button mat-raised-button color="primary" matStepperNext>Next</button> <!-- to be disabled using validClientInfo-->
      </div>

    </mat-step>

    <!---------------------------------------------------------------Property Details--------------------------------------------------------->
    <mat-step label="Property Details">
      <div class="card">
        <h3><span>Property Details Of Application</span></h3>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="propertyDescription" name="propertyDescription" placeholder="Enter property description ">
            <label for="propertyDescription">Registered Description *</label>
          </div>
        </div>
        <!--        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="premisesName" name="premisesName" placeholder="Enter premises name">
            <label for="premisesName">Premises Name</label>
          </div>
        </div>-->
      </div>



      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="erfNo" name="erfNo" placeholder="Enter Erf Number">
            <label for="erfNo">Title Restrictions</label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="portionNo" name="portionNo" placeholder="Enter Portion Number">
            <label for="portionNo">Extent of Property </label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="sGCode" name="sGCode" placeholder="SG Code" minlength="21" maxlength="21" required>
            <label for="sGCode">Title Deed No</label>
          </div>

        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" name="sGCode" placeholder="SG Code" minlength="21" maxlength="21" required>
            <label for="sGCode">Value Of Property</label>
          </div>

        </div>
      </div>





      <div class="card" *ngIf="map">
        <h3><span>Location</span></h3>
      </div>
      <div class="row">
        <mat-form-field>
          <mat-label>Address Type*</mat-label>
          <mat-select [(ngModel)]="addressType" name="addressType" (selectionChange)="onCheckAddressType()">
            <mat-option *ngFor="let address of addressTypesList" value="{{address.TypeName}}">{{address.TypeName}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="row">
        <!--        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="number" class="form-control" [(ngModel)]="NoOfUnits" name="NoOfUnits" placeholder="Enter number of units" min="1">
            <label for="NoOfUnits">Number of Units *</label>
          </div>
        </div>-->
        <div class="col" *ngIf="isInputDisabled == false && addressType && addressType != 'Household'">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="unitNo" name="UnitNo" placeholder="Enter unit number">
            <label for="UnitNo">{{addressType}} Number *</label>
          </div>
        </div>
      </div>
      <!--<div *ngIf="map"> <app-project-details-map [data]="ARCGISAPIData"></app-project-details-map></div>-->
      <app-google-maps-component></app-google-maps-component>
      <div class="cont">

        <button mat-raised-button color="primary" matStepperPrevious>Back</button>

        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>


    <mat-step label="Town Planner Details" *ngIf="applicationBeingCreatedType == 'Town Planning'">
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]=" architectName" name=" architectName" placeholder=" Architect Name">
            <label for=" architectName">Full Name</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectEmail" name="architectEmail" placeholder="Architect Email">
            <label for="architectEmail">Email Address</label>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectCell" name=" architectCell" placeholder=" Architect Cell">
            <label for=" architectCell">Cellphone Number</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectID" name="architectID" placeholder="Architect ID">
            <label for="architectID"> ID Number</label>
          </div>
        </div>
      </div>
      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>
    <!---------------------------------------------------------------Town Planing Application Details--------------------------------------------------------->
    <mat-step label="Application Details">
      <div class="card">
        <h3><span>Application Details</span></h3>
      </div>
      <br>
      <div class="row">

        <mat-form-field>
          <mat-label>Type Of Application*</mat-label>
          <mat-select [(ngModel)]="TPTOA" name="addressType" (selectionChange)="TypeOfApplicationDropDown()">
            <mat-option value="formal-authority">Formal Authority</mat-option>
            <mat-option value="scheme-amendment">Scheme Amendment</mat-option>
            <mat-option value="consent-application">Consent Application in terms of the Scheme</mat-option>
            <mat-option value="development-outside-scheme">Development of land outside the land use scheme</mat-option>
            <mat-option value="extension-replacement-building">Extension or replacement of a building on land that is used for a purpose defined in Schedule 2 of SPLUMA</mat-option>
            <mat-option value="subdivision-land">Subdivision of land</mat-option>
            <mat-option value="consolidation-land">Consolidation of land</mat-option>
            <mat-option value="township-establishment">Township establishment</mat-option>
            <mat-option value="notarial-tying-land">Notarial tying of land</mat-option>
            <mat-option value="extension-sectional-title-scheme">Extension of a sectional title scheme</mat-option>
            <mat-option value="permanent-closure-road">Permanent closure of a municipal road or a public place</mat-option>
            <mat-option value="removal-restrictive-condition">Removal, amendment or suspension of a restrictive condition of title or a servitude</mat-option>
            <mat-option value="material-change-approval-decision">Material change to a Municipal Planning Approval Authority decision</mat-option>
            <mat-option value="cancellation-approval-decision">Cancellation of a Municipal Planning Approval Authority decision</mat-option>
            <mat-option value="relaxation-scheme-controls">Relaxation of Scheme Controls</mat-option>
            <mat-option value="phasing-cancellation-layout-plans">Phasing or cancellation of approved layout plans for subdivision or development of land</mat-option>
            <mat-option value="other">Other, specify:</mat-option>
          </mat-select>
        </mat-form-field>

      </div>
      <div class="row">
        <mat-form-field>
          <mat-label>Type of property</mat-label>
          <mat-select [(ngModel)]="typeOfDevelopment" name="typeOfDevelopment" (selectionChange)="getDocsForApplication() ">
            <mat-option value="Domestic">Domestic</mat-option>
            <mat-option value="Commercial">Commercial</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="row">
        <mat-form-field class="example-full-width">
          <mat-label>Description of project</mat-label>
          <textarea matInput placeholder="Eg. This is good" id="myTextarea" maxlength="250" (input)="updateCharacterCount()" [(ngModel)]="DescriptionofApplicaitonTP"></textarea>
          <div>{{ DescriptionofApplicaitonTP.length }}/250</div>
        </mat-form-field>
      </div>
      <div class="row">
        <div class="form-floating mb-3 mt-3" *ngIf="typeOfApplicationOtherDes">
          <input type="text" class="form-control" name="otherSpecify" placeholder="Enter other Specify" [(ngModel)]="TPTOAOther">
          <label for="premisesName">Please specify Other *</label>
        </div>
      </div>

      <div class="row container-fluid">
        <p>Is this a combined Application ?</p>
        <mat-radio-group aria-label="Select an option" [(ngModel)]="isCombinedApplication">
          <mat-radio-button value="true">Yes</mat-radio-button>
          <mat-radio-button value="false">No</mat-radio-button>
        </mat-radio-group>
      </div>
      <br>
      <!--<div class="row">
      <div class="col">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="NameOfCompany" name="NoOfUnits" placeholder="Enter number of units">
          <label for="NoOfUnits">Name Of Company/Trust</label>
        </div>
      </div>
      <div class="col">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="RegNoOfCompany" name="NoOfUnits" placeholder="Enter number of units">
          <label for="NoOfUnits">Registration No. Of Company/Trust</label>
        </div>
      </div>-->
      <!--<div class="col" *ngIf="isInputDisabled == false && addressType && addressType != 'Household'">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="unitNo" name="UnitNo" placeholder="Enter unit number">
          <label for="UnitNo">{{addressType}} Number *</label>
        </div>
      </div>-->
      <!--</div>-->
      <!--<div class="card">
        <h3><span>Proof of ownership of property required</span></h3>
      </div>
      <div>
        <div class="row">

          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="AgentName" name="streetAddress" placeholder="Street Address" [disabled]="isInputDisabled">
              <label for="streetAddress">Name of Authorised Agent</label>
            </div>
          </div>

          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="AgentAddress" name="suburb" placeholder="Suburb" [disabled]="isInputDisabled">
              <label for="suburb">Postal Address</label>
            </div>
          </div>
        </div>
        <div class="row">

          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="AgentCell" name="city" placeholder="City" [disabled]="isInputDisabled">
              <label for="city">Cell No.</label>
            </div>
          </div>

          <div class="col">
            <div class="form-floating mb-3 mt-3">
              <input type="text" class="form-control" [(ngModel)]="AgentEmail" name="postalCode" placeholder="Postal Code" [disabled]="isInputDisabled">
              <label for="postalCode">Email</label>
            </div>
          </div>
        </div>

        <div class="row">-->
      <!--          <mat-form-field appearance="fill">
        <mat-label><strong>*Required*</strong> Supporting documents (Tick as per relevance to the application)</mat-label>
        <mat-select multiple [(ngModel)]="TPSupportingDocs">
          <mat-option value="thorough-motivation">Thorough Motivation</mat-option>
          <mat-option value="signed-consent">Signed registered Owner's written consent, if the applicant is not the owner of the land</mat-option>
          <mat-option value="company-trust-resolution">Resolution/s of Company/ Trust in the event that a company/ trust is the owner</mat-option>
          <mat-option value="bond-holders-consent">If the property is still Bonded, a Bond Holder's Consent</mat-option>
          <mat-option value="title-deed-conditions">Certified Copy of the Title Deed Conditions</mat-option>
          <mat-option value="locality-plan">Locality plan</mat-option>
          <mat-option value="survey-general-diagram">Copy of the Surveyor General diagram or relevant part of the general plan</mat-option>
          <mat-option value="scheme-map">Copy of the scheme map showing the existing zoning of the property and properties in close proximity (100m radius)</mat-option>
          <mat-option value="land-use">Copy of the land use showing the existing zoning of the property and properties in close proximity (100m radius)</mat-option>
          <mat-option value="site-development-plan">Site development plan where applicable</mat-option>
          <mat-option value="proposed-subdivision">Proposed subdivision with subdivision numbers designated by the SG's office, width and length of hatched shaped Erven, Erf frontages</mat-option>
          <mat-option value="floodlines">1:100 year floodlines</mat-option>
          <mat-option value="engineering-services">Engineering Services/ Service Level Agreement</mat-option>
          <mat-option value="traffic-impact-assessment">Approved Traffic Impact Assessment</mat-option>
          <mat-option value="environmental-authorisation">Copy of an Environmental Authorisation (ROD)</mat-option>
          <mat-option value="geotechnical-report">Geotechnical Report</mat-option>
          <mat-option value="municipal-comments">Comments from relevant Municipal Departments</mat-option>
          <mat-option value="other-info">Any other information that may be considered either by yourself or Council as being in support of your application</mat-option>
        </mat-select>
      </mat-form-field>-->
      <!--</div>-->
      <!--          <div>
        <p>I hereby declare that the information supplied by me, including the documents attached to this application form is correct and authentic.    </p>  <mat-checkbox class="example-margin" [(ngModel)]="checked">I Agree</mat-checkbox>

      </div>-->
      <!--          <div class="col">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="sGCode" name="sGCode" placeholder="SG Code">
          <label for="sGCode">SG Code</label>
        </div>
      </div>-->
      <!--</div>-->
      <div class="cont">

        <button mat-raised-button color="primary" matStepperPrevious>Back</button>

        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>
    <!----------------------------------------------Architect Details ------------------------------------------------->
    <mat-step label="Architect Details" *ngIf="applicationBeingCreatedType != 'Town Planning'">

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]=" architectName" name=" architectName" placeholder=" Architect Name">
            <label for=" architectName"> Architect Full Name</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectEmail" name="architectEmail" placeholder="Architect Email">
            <label for="architectEmail">Architect Email Address</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectCell" name=" architectCell" placeholder=" Architect Cell">
            <label for=" architectCell"> Architect Cellphone Number</label>
          </div>
        </div>
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="architectID" name="architectID" placeholder="Architect ID">
            <label for="architectID">Architect ID Number</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="regNo" name=" regNo" placeholder="Reg Number">
            <label for="regNo"> Architect Registration Number</label>
          </div>
        </div>
      </div>

      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>
    </mat-step>
    <!-------------------------------------------------------------------Plan Details--------------------------------------------->
    <mat-step label="Plan Details" *ngIf="applicationBeingCreatedType != 'Town Planning'">

      <div class="col">
        <div class="form-floating mb-3 mt-3">
          <input type="text" class="form-control" [(ngModel)]="buildingPlansFor" name="plansFor" placeholder="Postal Code">
          <label for="planFor">Bulding Plans For *</label>
        </div>
      </div>

      <div class="row">
        <mat-form-field>
          <mat-label>Type Of Development *</mat-label>
          <mat-select [(ngModel)]="typeOfDevelopment" name="typeOfDevelopment" (selectionChange)="getDocsForApplication() ">
            <mat-option value="Domestic">Domestic</mat-option>
            <mat-option value="Commercial">Commercial</mat-option>
          </mat-select>
        </mat-form-field>
      </div>


      <div class="row">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="totalArea" name="totalArea" placeholder="Total Area">
            <label for="totalArea">Total Area(meters squared)</label>
          </div>
        </div>
      </div>

      <button mat-raised-button (click)="openClassification()" color="action">Select Occupation Classification</button>

      <div class="row" *ngIf="Classification">
        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="Classification" name="occupationClassification" placeholder="Occupation Classification">
            <label for="occupationClassification">Occupation Classification</label>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <mat-checkbox (change)="onServitudeCheck()" [checked]="servitudeBox">Omnibus Servitude In Title Deed</mat-checkbox>
        </div>
      </div>

      <div class="row">
        <div class="col" *ngIf="isInternal">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="planFees" name="Fees" placeholder="Plan Fees">
            <label for="Fees">Plan Fees(R)</label>
          </div>
        </div>

        <div class="col">
          <div class="form-floating mb-3 mt-3">
            <input type="text" class="form-control" [(ngModel)]="propertyValue" name="propertyValue" placeholder="Property Value">
            <label for="propertyValue">Property Value(R)</label>
          </div>
        </div>
      </div>

      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
        <button mat-raised-button color="primary" matStepperNext>Next</button>
      </div>

    </mat-step>
    <!---------------------------------------------------------------uploading docs----------------------------------------------------------->

    <mat-step>
      <form>
        <ng-template matStepLabel>Document Uploads</ng-template>
      </form>
      <!--<mat-list *ngFor="let manDoc of MandatoryDocumentsLinkedStagesList | async; let i=index; trackBy: trackByFn" [attr.data-index]="i">-->
      <mat-list *ngFor="let manDoc of BPMandatoryDocumentList | async; let i=index; trackBy: trackByFn" [attr.data-index]="i">
        <mat-list-item> {{manDoc.mandatoryDocumentName}}</mat-list-item>
        <mat-form-field>
          <div>
            <mat-toolbar>
              <!-- Display files names -->
              <input matInput readonly name="name" class="textFuckingBox" />
              <!-- app-file-upload Component -->

              <div class="container-fluid">
                <app-bpfile-upload [ApplicationID]="applicationID"
                                   [UploadFor]="manDoc.mandatoryDocumentName"
                                   (passFileName)="onPassFileName($event,i)"
                                   (onUploadFinished)="onFileDelete($event,i)"
                                   (onUploadSuccess)="onFileUpload($event)">
                </app-bpfile-upload>
              </div>


              <!--<button *ngIf="manDoc.mandatoryDocumentName && isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="addUploader(i)">Add Another Upload</button>-->
              <!--<button mat-raised-button color="addNewUploadButtonColor" *ngIf="manDoc.mandatoryDocumentName && isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="addUploader(i)" matTooltip="Add New Upload"><i class="fa fa-plus" aria-hidden="true"></i></button>
              <button mat-raised-button color="warn" *ngIf="manDoc.mandatoryDocumentName && !isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="deleteUploader(i)" matTooltip="Delete"><i class="fa fa-trash" aria-hidden="true"></i></button>-->
              <!--  <button *ngIf="manDoc.mandatoryDocumentName && !isLastCharacterNotNumber(manDoc.mandatoryDocumentName)" (click)="deleteUploader(i)">Delete</button>-->
            </mat-toolbar>
          </div>
        </mat-form-field>
      </mat-list>

      <div class="container04">
        <mat-progress-bar mode="indeterminate" *ngIf="successfulUploads >0 && successfulUploads < totalDocs"></mat-progress-bar>





        <button class="pushable" *ngIf="successfulUploads == totalDocs" (click)="buildProjectNumber()">
          <span class="shadow"></span>
          <span class="edge"></span>
          <span class="front">Create Application</span>
        </button>

        <!--  <img src="assets/Loading.png" *ngIf="successfulUploads >0 && successfulUploads < totalDocs" class="logo2">-->
        <p *ngIf="successfulUploads >0 && successfulUploads < totalDocs">Uploading Documents. You may continue to upload remaining documents if needed.</p>


      </div>

      <div class="cont">
        <button mat-raised-button color="primary" matStepperPrevious>Back</button>
      </div>
    </mat-step>

  </mat-horizontal-stepper>

  <!-- #endregion -->
</div>

<ng-template #selectClassification let-modal>
  <div class="modal-header">
    <h1>Select an Occupation Classification</h1>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>

  <div class="modal-body">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

      <ng-container matColumnDef="OccupationName">
        <th mat-header-cell *matHeaderCellDef>Occupation Name</th>
        <td mat-cell *matCellDef="let element"> {{element.ClassificationName}}:{{element.Occupancy}} </td>
      </ng-container>

      <ng-container matColumnDef="Desription">
        <th mat-header-cell *matHeaderCellDef>Description</th>
        <td mat-cell *matCellDef="let element"> {{element.OccupancyDescription}} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Select</th>
        <td mat-cell *matCellDef="let i = index">
          <mat-radio-button class="example-margin" (click)="SetOccupationClassification(i)"></mat-radio-button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef=" displayedColumn"></tr>
      <tr mat-row *matRowDef="let row; columns:  displayedColumn;"></tr>

    </table>
    </div>
  <div class="modal-footer">
    <button type="submit" class="btn btn-outline-success" (click)="modal.dismiss('Save Click')" >Save</button>
  </div>
   
</ng-template>
